<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ibidem: Recreaci√≥n Hist√≥rica | Vivere Romanum</title>
    
    <!-- LIBRER√çAS EXTERNAS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">

    <!-- ESTILOS PERSONALIZADOS -->
    <style>
        :root {
            --color-pompeyano: #9A2A2A;
            --color-pergamino: #F5EFE3;
            --color-pizarra: #2A2A2A;
            --color-dorado: #B8860B;
        }
        body {
            font-family: 'Merriweather', serif;
            background-color: var(--color-pergamino);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            color: var(--color-pizarra);
        }
        .font-cinzel { font-family: 'Cinzel', serif; }
        .border-roman { border: 3px double var(--color-pompeyano); }
        .border-roman-gold { border: 3px double var(--color-dorado); }
        .text-shadow { text-shadow: 1px 1px 2px rgba(0,0,0,0.8); }
        
        /* Estilos de contenido */
        .article-content h2, .event-content h2 {
            font-family: 'Cinzel', serif; color: var(--color-pompeyano); font-weight: 700; font-size: 1.5rem;
            margin-top: 2rem; margin-bottom: 1rem; border-bottom: 2px solid var(--color-dorado); padding-bottom: 0.5rem;
        }
        .article-content p, .event-content p { margin-bottom: 1.5rem; line-height: 1.8; text-align: justify; }
        .article-content blockquote {
            border-left: 4px solid var(--color-dorado); background-color: #fcfaf6; padding: 1rem 1.5rem; margin: 1.5rem 0; font-style: italic; color: #555;
        }
        .article-content ul, .event-content ul { list-style: disc; margin-left: 1.5rem; margin-bottom: 1.5rem; padding-left: 0.5rem; }
        .event-poster { background-color: #ffffff; border: 5px solid var(--color-pompeyano); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    
    <!-- CONFIGURACI√ìN TAILWIND -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pompeyano: '#9A2A2A',
                        pergamino: '#F5EFE3',
                        pizarra: '#2A2A2A',
                        dorado: '#B8860B',
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- L√ìGICA DE LA APLICACI√ìN (REACT) -->
    <script type="text/babel">

        // =====================================================================
        // üèõÔ∏è ZONA DE EDICI√ìN DE DATOS üèõÔ∏è
        // =====================================================================
        
        const PAST_EVENTS_DATA = [
            {
                id: 7,
                title: "Funus, morir en la Antigua Roma",
                date: "1 de Noviembre, 2025",
                day: 1, month: "NOV",
                location: { locality: "Monturque (C√≥rdoba)", place: "Criptop√≥rtico" },
                desc: "Recreaci√≥n de los ritos f√∫nebres romanos (funus), pompa f√∫nebre y cremaci√≥n del cad√°ver.",
                tags: ["Rito", "Funerario"]
            },
            {
                id: 6,
                title: "Funus: El √∫ltimo viaje",
                date: "31 de Octubre, 2025",
                day: 31, month: "OCT",
                location: { locality: "Herrera (Sevilla)", place: "Termas romanas" },
                desc: "Demostraci√≥n de los rituales que acompa√±aban al difunto, recreada en las termas romanas de Herrera.",
                tags: ["Rito", "Funerario"]
            },
            {
                id: 5,
                title: "PVGNO, ERGO SVM",
                date: "25 de Octubre, 2025",
                day: 25, month: "OCT",
                location: { locality: "Herrera (Sevilla)", place: "Termas romanas" },
                desc: "Recreaci√≥n de las t√©cnicas de lucha (Pugilato) y combate de la antig√ºedad romana, realizado en las termas.",
                tags: ["Rito", "Combate"]
            },
            {
                id: 4,
                title: "Adelfopoiesis: Hermandad Juramentada",
                date: "27 de Septiembre, 2025",
                day: 27, month: "SEP",
                location: { locality: "C√≥rdoba", place: "Casa √Årabe" },
                desc: "Recreaci√≥n del rito de 'hermandad' o 'adopci√≥n ritual' en un enclave de di√°logo cultural, explorando las uniones sociales en Roma.",
                tags: ["Rito", "Social", "Vida Civil"]
            },
            {
                id: 3,
                title: "Adelfopoiesis: La Fraternidad C√≠vica",
                date: "13 de Septiembre, 2025",
                day: 13, month: "SEP",
                location: { locality: "Puente Genil (C√≥rdoba)", place: "Villa romana de Fuente √Ålamo" },
                desc: "Ritual que exploraba la instituci√≥n de la Adelfopoiesis (uniones solemnes de amistad y hermandad) en el marco de la villa romana.",
                tags: ["Rito", "Social"]
            },
            {
                id: 2,
                title: "Las Rosas de Heliog√°balo",
                date: "26 de Julio, 2025",
                day: 26, month: "JUL",
                location: { locality: "Puente Genil (C√≥rdoba)", place: "Villa romana de Fuente √Ålamo" },
                desc: "Evento tem√°tico basado en el pol√©mico emperador Heliog√°balo y las costumbres suntuosas de la corte. Historia y decadencia.",
                tags: ["Tem√°tico", "Vida Civil", "Realeza"]
            },
        ].sort((a, b) => new Date(b.date.replace(/de /, '')) - new Date(a.date.replace(/de /, ''))); // Ordenar por fecha descendente (m√°s reciente primero)

        const IMAGINA_ALBUMS_DATA = PAST_EVENTS_DATA.map(event => ({
            id: event.id,
            eventTitle: event.title,
            date: event.date,
            // Usamos un color distinto para cada ID para simular diferentes portadas
            coverImage: `https://placehold.co/800x600/${(100 + event.id * 10).toString(16)}/F5EFE3?text=ALBUM+${event.title.split(':')[0].trim().toUpperCase()}`,
            images: Array.from({ length: 9 }, (_, i) => ({
                src: `https://placehold.co/800x600/${(100 + event.id * 10 + i * 2).toString(16)}/F5EFE3?text=${event.title.split(':')[0].trim().toUpperCase()}+${i+1}`,
                caption: `Foto ${i + 1}: ${event.title}`,
                category: event.tags[0] 
            }))
        }));

        const DATA = {
            general: {
                email: "ibidemrecreacion@gmail.com",
                facebook: "https://www.facebook.com/ibidem.ibidem/",
                instagram: "https://www.instagram.com/ibidemrecreacion/",
                logoUrl: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Ibidem_logo_nuevo.png",
                heroImageHome: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Pepe_Larario.jpg"
            },
            home: {
                heroTitle: "Reconstrucci√≥n hist√≥rica de la vida civil con rigor acad√©mico",
                intro: "Somos una asociaci√≥n dedicada a la reconstrucci√≥n minuciosa de la vida civil romana, centrando nuestro esfuerzo en el detalle de la indumentaria, los oficios y la gastronom√≠a del Imperio. Nuestro enfoque es simple: hacer vivir la historia bas√°ndonos siempre en fuentes primarias.",
                pilares: [
                    { 
                        title: "Rigor Hist√≥rico", 
                        text: "Nos basamos en fuentes primarias, tanto escritas como arqueol√≥gicas e iconogr√°ficas, y metodolog√≠a cient√≠fica para cada recreaci√≥n.", 
                        linkTo: "tabularium" 
                    },
                    { 
                        title: "Vida Civil", 
                        text: "Recreamos los momentos m√°s importantes de la vida civil: bodas, funerales, cultos dom√©sticos y festividades, elaborando siempre nuestros propios trajes y utiler√≠a con rigor.", 
                        linkTo: "imagina" 
                    },
                    { 
                        title: "Divulgaci√≥n", 
                        text: "Llevamos la historia a yacimientos y museos con una experiencia did√°ctica y participativa, haciendo honor a nuestro nombre, Ibidem, \"en el mismo lugar\".", 
                        linkTo: "fasti" 
                    }
                ]
            },
            nostri: {
                mainText: "Ibidem es una asociaci√≥n de recreaci√≥n hist√≥rica con sede en Puente Genil (C√≥rdoba), fundada por el desaparecido Jos√© Montesinos Moreno, un pionero en la recreaci√≥n hist√≥rica. Ibidem naci√≥ de una idea sencilla: acercar el p√∫blico a la intrahistoria, es decir, la cotidianeidad de los personas an√≥nimas, traer a la vida sus costumbres, ritos, esperanzas y miedos. Desde su fundaci√≥n en 2013, nuestra asociaci√≥n ha tenido una obsesi√≥n, aplicar a la recreaci√≥n hist√≥rica civil el rigor acad√©mico. Durante todo este tiempo hemos trabajado en la investigaci√≥n, reconstrucci√≥n y difusi√≥n de distintos aspectos de la vida cotidiana como la indumentaria, ritos dom√©sticos, el papel de la mujer, los funerales o el uso del agua, entre otras. Aunque el periodo hist√≥rico en el que m√°s hemos trabajado sea la Antig√ºedad tard√≠a romana,  nuestra investigaci√≥n y trabajo se extiende por otras √©pocas como la Roma republicana, el mundo bizantino, el calcol√≠tico o el mundo andalus√≠. Ibidem es una de las asociaciones de recreaci√≥n hist√≥rica m√°s veteranas de Andaluc√≠a, ha estado presente en actividades culturales de diversos museo y yacimientos arqueol√≥gicos andaluces como Sevilla, C√≥rdoba, Carmona, It√°lica, Antequera, El Egido o Gilena, cuya musealizaci√≥n fue obra de Jos√© Montesinos. Sus actividades se han representado en festivales de recreaci√≥n hist√≥rica nacionales e internacionales como Natale di Roma, Calendas en Cordvba, Em√©rita l√∫dica, Tarraco Viva o Castra Legionis. Ibidem fue adem√°s la responsable de las escenas de dramatizaci√≥n del documental ¬´Al-√Åndalus: el legado¬ª, producido por el Canal de Historia.",
                founder: {
                    name: "Jos√© Montesinos Moreno",
                    years: "1969‚Äì2022",
                    desc: "Ibidem naci√≥ de la mente y la experiencia de Pepe Montesinos, fundador y coordinador de nuestro grupo. Pepe era tremendamente inteligente, curioso, inquieto, inconformista, pol√©mico, infatigable y tan generoso que all√° por donde pas√≥ dej√≥ un poco (m√°s bien mucho) de su esencia. Y todo ello lo hac√≠a con tanto sentido del humor que era imposible no dejarse llevar por esa tormenta creativa que era Pepe. Era un pol√≠mata con el que poder debatir sobre lo m√°s profundo de la naturaleza humana o satirizar hasta el absurdo cualquier tema. Sus manos dominaron la pintura, el modelado, la costura, la artesan√≠a y su mente era capaz de reconciliar campos del conocimiento aparentemente inconexos para llegar a conclusiones tan divergentes como curiosas. Para la gente de Ibidem no s√≥lo fue un coordinador: fue un amigo, un l√≠der, un maestro al que poder acudir en cualquier momento. Por eso su ausencia se hace tan dura. Se te echa tanto de menos, Pepe...",
                    image: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Screenshot_20251005_111843_Instagram.jpg"
                }
            },
            
            // -----------------------------------------------------------------
            // üìú TABULARIUM (EL BLOG) üìú
            // (Contenido del blog no modificado)
            // -----------------------------------------------------------------
            tabularium: {
                articles: [
                    {
                        id: 2,
                        category: "Vida Cotidiana",
                        title: "La dieta de los Gladiadores: 3 verdades sorprendentes que desaf√≠an el mito",
                        date: "26 de Octubre, 2025",
                        author: "Ibidem",
                        summary: "¬øH√©roes musculados o luchadores de sumo? Descubre la sorprendente realidad diet√©tica de los gladiadores romanos: cebada, grasa y supervivencia.",
                        img: "https://placehold.co/1000x400/8B4513/F5EFE3?text=HOMBRES+DE+CEBADA", 
                        intro: "Cuando pensamos en un gladiador romano, la imagen que suele venir a la mente es la de un h√©roe de acci√≥n de Hollywood: un f√≠sico esculpido, con m√∫sculos de acero y una definici√≥n corporal perfecta. Pero, ¬øy si te dijera que los gladiadores de la antigua Roma se parec√≠an m√°s a luchadores de sumo que a los h√©roes de la gran pantalla? La evidencia hist√≥rica nos cuenta una historia muy diferente, una donde la dieta no buscaba la est√©tica, sino la supervivencia y, sobre todo, el espect√°culo. Este art√≠culo revelar√° los secretos de su sorprendente preparaci√≥n, un sistema pragm√°tico dise√±ado para el negocio m√°s brutal del Imperio.",
                        sections: [
                            {
                                title: "1. Olvida los m√∫sculos, eran los ¬´hombres de cebada¬ª",
                                content: "Lejos de las dietas ricas en prote√≠nas que esperar√≠amos de un atleta de √©lite, los gladiadores ten√≠an una alimentaci√≥n muy espec√≠fica basada principalmente en carbohidratos. Sus comidas consist√≠an en granos, sobre todo cebada, y legumbres como las habas. Esta dependencia de los cereales era tan marcada que se ganaron el apodo revelador de ¬´hombres de cebada¬ª. Esta dieta, enfocada en ganar volumen y resistencia en lugar de definici√≥n muscular, no era bien vista por las √©lites romanas. El fil√≥sofo S√©neca, por ejemplo, los describ√≠a de forma despectiva, evidenciando el desprecio que sent√≠a por un f√≠sico que no buscaba la perfecci√≥n, sino la funcionalidad para la arena.\n\nblockquote:¬´...gente est√∫pida cuya vida oscila entre el beber y el sudar, que ceban su cuerpo...¬ª",
                                image: "https://placehold.co/800x400/DAA520/3E2723?text=GRANO+Y+LEGUMBRES"
                            },
                            {
                                title: "2. La grasa como armadura",
                                content: "La raz√≥n detr√°s de esta dieta alta en calor√≠as era puramente estrat√©gica y econ√≥mica. El objetivo no era conseguir un f√≠sico definido, sino crear una gruesa capa de grasa subcut√°nea que cubriera sus m√∫sculos. Esta ¬´armadura¬ª natural era crucial en la arena, ya que amortiguaba el impacto de los golpes y proteg√≠a vasos sangu√≠neos, nervios y √≥rganos de cortes superficiales. Esto era fundamental para la naturaleza del espect√°culo y la l√≥gica del negocio: permit√≠a peleas m√°s sangrientas y visualmente impactantes para el p√∫blico, pero al mismo tiempo menos letales. Los gladiadores eran una inversi√≥n muy valiosa para sus due√±os, quienes necesitaban mantenerlos vivos y listos para el siguiente combate. Una herida superficial y sangrienta era mucho m√°s rentable que una estocada mortal que acabara con un activo tan caro.",
                                image: null
                            },
                            {
                                title: "3. El desprecio por el atleta griego",
                                content: "El f√≠sico robusto del gladiador no era un descuido, sino el resultado de un rechazo cultural deliberado al ideal atl√©tico griego. Mientras los griegos veneraban la perfecci√≥n est√©tica del cuerpo, los romanos ve√≠an sus pr√°cticas deportivas con desd√©n. Consideraban los gimnasios griegos ¬´escuelas de vicios¬ª, y sent√≠an aversi√≥n por costumbres como la desnudez p√∫blica y la homosexualidad asociada a ellos. Incluso un admirador de la cultura hel√©nica como Cicer√≥n aprobaba la sentencia del poeta Ennio: ¬´mostrarse desnudos en p√∫blico es el comienzo de la corrupci√≥n¬ª. Para la mentalidad romana, eminentemente pr√°ctica, el cuerpo no era una obra de arte que perfeccionar, sino una herramienta para un fin. La preparaci√≥n del gladiador era el m√°ximo exponente de esta filosof√≠a: su cuerpo estaba estrat√©gicamente dise√±ado no para ser bello, sino para resistir, para sangrar sin morir y, en definitiva, para ofrecer el mejor espect√°culo posible.",
                                image: "https://placehold.co/800x400/555555/F5EFE3?text=MOSAICO+GLADIADORES"
                            },
                            {
                                title: "¬øY qu√© hay de los P√∫giles Romanos?",
                                content: "Aunque las fuentes hist√≥ricas no son tan espec√≠ficas sobre la dieta de los boxeadores (p√∫giles) como lo son con los gladiadores, podemos hacer una conexi√≥n l√≥gica. El pugilato romano ¬´era considerado m√°s un espect√°culo de gladiadores que una competici√≥n atl√©tica¬ª, a diferencia del ideal griego. Dado que el enfoque estaba en el espect√°culo, la resistencia y la capacidad de absorber castigo, es muy probable que los p√∫giles siguieran principios diet√©ticos similares a los de los gladiadores. Su objetivo, al igual que el de sus compa√±eros de arena, ser√≠a priorizar la masa corporal y la protecci√≥n sobre la definici√≥n muscular, todo en servicio del entretenimiento de las masas.",
                                image: null
                            }
                        ],
                        bibliografia: [
                            "Digibug UGR. *Munera Gladiatoria: Origen del deporte espect√°culo de masas*.",
                            "Hern√°ndez V√°zquez, M. *El juego deportivo en las culturas urbanas plenas: Roma*. Museo del Juego.",
                            "Tom√°s Garc√≠a, J. *Iconograf√≠as del arte antiguo: Grecia y Roma*."
                        ]
                    },
                    {
                        id: 1,
                        category: "Ritos",
                        title: "El √öltimo Viaje: Un Recorrido por las Fases del Funeral en la Antigua Roma (Funus)",
                        date: "Noviembre, 2025",
                        author: "Ibidem",
                        summary: "Para un romano, la muerte no era el final, sino la transici√≥n m√°s cr√≠tica de su existencia. Descubre el complejo ritual social y religioso del funus.",
                        img: "https://placehold.co/1000x400/2A2A2A/F5EFE3?text=FUNUS+ROMANO", 
                        intro: "Para un romano, la muerte no era el final, sino la transici√≥n m√°s cr√≠tica de su existencia; una que defin√≠a no solo su paso a la otra vida, sino el legado de su familia para las generaciones venideras. El funus, el conjunto de ceremonias que acompa√±aban al difunto desde su √∫ltimo aliento hasta la sepultura, era mucho m√°s que un simple entierro. Se trataba de un complejo ritual social y religioso dise√±ado para marcar el tr√°nsito del individuo, reafirmar el estatus de su linaje y, sobre todo, grabar su recuerdo en la piedra y en la conciencia de la comunidad para alcanzar la anhelada memoria aeterna.",
                        sections: [
                            {
                                title: "1. Los Primeros Momentos: Ritos Inmediatos tras el Fallecimiento",
                                content: "Cuando el √∫ltimo aliento escapaba del cuerpo, comenzaba una carrera contra el tiempo y el olvido. La familia iniciaba de inmediato los ritos que aseguraban la correcta transici√≥n del alma y preparaban al difunto para su viaje final.\n\nLa Despedida y el Amortajamiento: Tras la √∫ltima exhalaci√≥n, los familiares m√°s cercanos cerraban los ojos del difunto, un gesto √≠ntimo que sellaba la partida. A continuaci√≥n, las mujeres de la familia se encargaban de lavar el cad√°ver, afeitarlo y ungirlo con perfumes. En ciertos casos, y dependiendo de la riqueza de la familia, los pollinctores, personal especializado de las pompas f√∫nebres, pod√≠an realizar un embalsamamiento para preservar el cuerpo durante los d√≠as venideros.\n\nEl √ìbolo para Caronte: Se introduc√≠a una moneda en la boca del difunto. Este era el '√≥bolo de Caronte', el pago destinado al adusto barquero del inframundo para que transportara el alma a trav√©s del r√≠o Aqueronte y le permitiera acceder a su destino final.",
                                image: null
                            },
                            {
                                title: "2. El Velatorio P√∫blico: La Expositio Cadaveris",
                                content: "Una vez preparado, el cuerpo se vest√≠a con sus mejores galas ‚Äîla toga para los ciudadanos, como s√≠mbolo de su estatus en vida‚Äî y se expon√≠a p√∫blicamente sobre un lecho funerario en el atrio de la domus (la casa familiar). Esta fase, conocida como expositio cadaveris, permit√≠a a amigos, clientes y parientes presentar sus respetos. La duraci√≥n del velatorio era un claro indicador de la posici√≥n social del fallecido: para las clases medias y altas, pod√≠a extenderse de tres a siete d√≠as, mientras que para los emperadores duraba una semana completa.",
                                image: null
                            },
                            {
                                title: "3. La Procesi√≥n hacia la Eternidad: La Pompa Funebris",
                                content: "La procesi√≥n f√∫nebre, o pompa funebris, era uno de los actos m√°s espectaculares y p√∫blicos del funus, un verdadero teatro de la memoria y el poder familiar que se desplegaba ante los ojos de toda la ciudad.\n\n‚Ä¢ El Recorrido: Aunque en sus or√≠genes las procesiones se realizaban al amparo de la noche, con el tiempo pasaron a celebrarse a plena luz del d√≠a, conservando el uso de antorchas como un eco de la antigua costumbre. La procesi√≥n no segu√≠a un camino cualquiera; su paso por el Foro, el coraz√≥n palpitante de la vida c√≠vica y pol√≠tica, transformaba un duelo familiar en un acontecimiento de Estado.\n\n‚Ä¢ Los Participantes: El cortejo estaba formado por una abigarrada comitiva: familiares y amigos del difunto, esclavos liberados en el testamento como √∫ltimo acto de generosidad, y las pla√±ideras (praeficae), mujeres contratadas cuyo llanto profesional y lamentos desgarradores aseguraban que la solemnidad y el dramatismo del evento estuvieran a la altura del estatus familiar.\n\n‚Ä¢ Las Imagines Maiorum: Sin duda, el elemento m√°s sobrecogedor de las procesiones patricias era la exhibici√≥n de las imagines maiorum, m√°scaras de cera que reproduc√≠an con un realismo asombroso los rostros de los antepasados ilustres de la familia. El historiador griego Polibio nos dej√≥ una descripci√≥n invaluable de este ritual: unos actores, ataviados con las insignias correspondientes al rango de cada ancestro, portaban sus m√°scaras. El efecto era sobrecogedor: no era una procesi√≥n de m√°scaras inertes, sino un desfile de los grandes hombres de la Rep√∫blica, 'resucitados' para acompa√±ar a su descendiente en su √∫ltimo viaje.",
                                image: "https://placehold.co/800x400/555/F5EFE3?text=IMAGINES+MAIORUM"
                            },
                            {
                                title: "4. El Elogio Final y el Camino al Sepulcro",
                                content: "Al llegar al Foro, el cortejo se deten√≠a para el √∫ltimo homenaje p√∫blico. Desde la tribuna de los oradores (rostra), la misma plataforma desde la que se pronunciaban los grandes discursos pol√≠ticos que decid√≠an el destino de Roma, un pariente cercano pronunciaba la laudatio funebris. El elogio no era una biograf√≠a exhaustiva, sino una cuidadosa selecci√≥n de los altius gesta ‚Äîlos hechos m√°s elevados‚Äî que constru√≠an un paradigma de virtud c√≠vica y militar.\n\nConcluido el homenaje, la procesi√≥n reanudaba su marcha fuera de la ciudad. La ancestral Ley de las XII Tablas prohib√≠a de manera estricta los entierros dentro del pomerium, el l√≠mite sagrado de la urbe. Por este motivo, todas las necr√≥polis romanas se ubicaban extramuros, flanqueando las grandes calzadas que conectaban Roma con su imperio.",
                                image: null
                            },
                            {
                                title: "5. ¬øFuego o Tierra? Cremaci√≥n e Inhumaci√≥n",
                                content: "Los romanos practicaron dos ritos principales para el tratamiento final del cuerpo, los cuales coexistieron durante siglos.\n\n5.1. La Cremaci√≥n (Crematio): Fue el rito predominante durante la Rep√∫blica tard√≠a y la mayor parte del Imperio. El cuerpo se depositaba en una imponente pira funeraria (rogus). Una vez el fuego consum√≠a el cuerpo, los familiares realizaban el ossilegium, la piadosa recogida de los huesos calcinados, que se depositaban cuidadosamente en una urna cineraria.\n\n5.2. La Inhumaci√≥n (Inhumatio): El entierro directo del cuerpo se generaliz√≥ a partir del siglo II d.C. El auge de este rito se asocia con la influencia de nuevas creencias procedentes de Oriente, entre ellas el cristianismo, que otorgaban una gran importancia a la preservaci√≥n del cuerpo con vistas a una futura resurrecci√≥n.",
                                image: null
                            },
                            {
                                title: "6. Despu√©s del Adi√≥s: El Banquete y el Duelo",
                                content: "Tras la sepultura, la familia celebraba un banquete f√∫nebre. Sin embargo, el contacto con la muerte hab√≠a provocado una ruptura ritual (funestus) que los dejaba en un estado de 'contaminaci√≥n'. Deb√≠an someterse a ritos de purificaci√≥n. Se iniciaba entonces el periodo de luto (lugubria), durante el cual las mujeres vest√≠an ropas oscuras y renunciaban al uso de joyas.",
                                image: null
                            },
                            {
                                title: "7. Conmemoraci√≥n y Festividades",
                                content: "Para los romanos, la √∫nica forma de inmortalidad terrenal era la memoria aeterna. El recuerdo de los difuntos se manten√≠a vivo a trav√©s de monumentos perdurables y de rituales anuales que reforzaban los lazos entre generaciones.\n\nCada a√±o, el calendario romano dedicaba varias fiestas a los muertos. Durante los Parentalia y los Feralia, las familias visitaban las tumbas de sus antepasados para llevar ofrendas de comida y vino. En otras festividades como los Rosalia y los Violaria, los sepulcros se adornaban con flores.",
                                image: null
                            },
                            {
                                title: "Conclusi√≥n",
                                content: "El funus romano fue una ceremonia p√∫blica y altamente estructurada, dise√±ada para gestionar el dolor, honrar al individuo y proyectar el poder y prestigio de su familia. Cada fase, desde los ritos √≠ntimos en el hogar hasta el espect√°culo p√∫blico de la procesi√≥n y el elogio en el Foro, serv√≠a para tejer la historia de una estirpe en el gran tapiz de la sociedad. As√≠, cada funeral patricio no era solo el adi√≥s a un hombre, sino la reafirmaci√≥n de que Roma misma era una procesi√≥n ininterrumpida de ancestros y descendientes, marchando hacia la eternidad.",
                                image: null
                            }
                        ],
                        bibliografia: [
                            "Toynbee, J.M.C. (1971). *Death and Burial in the Roman World*. Johns Hopkins University Press.",
                            "Hope, V.M. (2009). *Roman Death: The Dying and the Dead in Ancient Rome*. Continuum.",
                            "Polibio, *Historias*, Libro VI.",
                            "T√°cito, *Anales*."
                        ]
                    }
                ]
            },

            // -----------------------------------------------------------------
            // üìÖ FASTI (CALENDARIO DE EVENTOS) üìÖ
            // -----------------------------------------------------------------
            fasti: {
                upcoming: [], // Ya se realizaron
                past: PAST_EVENTS_DATA, // Eventos pasados del usuario
            },

            // -----------------------------------------------------------------
            // üì∏ IMAGINA (GALER√çA) üì∏
            // -----------------------------------------------------------------
            imagina: {
                albums: IMAGINA_ALBUMS_DATA,
            }
        };
        
        // =====================================================================
        // üö´ FIN DE LA ZONA DE DATOS üö´
        // =====================================================================

        const { useState, useEffect } = React;
        
        // --- Componentes de Iconos ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Icons = {
            Menu: (props) => <IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconBase>,
            X: (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>,
            Mail: (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>,
            Facebook: (props) => <IconBase {...props}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></IconBase>,
            Instagram: (props) => <IconBase {...props}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></IconBase>,
            MapPin: (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>,
            ChevronLeft: (props) => <IconBase {...props}><path d="m15 18-6-6 6-6"/></IconBase>,
            ChevronRight: (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>,
            Newspaper: (props) => <IconBase {...props}><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2"/><path d="M18 6h-8"/><path d="M15 10h-5"/><path d="M15 14h-5"/><path d="M15 18h-5"/></IconBase>,
            BookOpen: (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>,
            ArrowLeft: (props) => <IconBase {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></IconBase>,
            Calendar: (props) => <IconBase {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconBase>,
            Clock: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>,
            Camera: (props) => <IconBase {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></IconBase>,
            Gallery: (props) => <IconBase {...props}><path d="M4 3h16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><circle cx="9" cy="9" r="2"/><path d="m17.5 10.5-5 5-2.5-2.5-4 4"/></IconBase>
        };

        // --- Componentes UI ---
        const SectionHeader = ({ title, subtitle }) => (
            <div className="w-full bg-pizarra text-pergamino p-6 md:p-8 rounded-xl shadow-xl mb-12 text-center border-b-4 border-dorado fade-in">
                <h1 className="font-cinzel text-3xl md:text-5xl font-bold tracking-wider mb-1">{title}</h1>
                {subtitle && <p className="font-cinzel text-dorado text-lg tracking-widest uppercase italic mt-1">{subtitle}</p>}
            </div>
        );

        const PageHero = ({ image, title, subtitle, height = "h-[60vh]", align = "center" }) => {
            const alignClasses = align === "bottom-left" ? "items-start justify-end text-left pb-8 pl-8" : "items-center justify-center text-center";
            const titleSize = align === "bottom-left" ? "text-lg md:text-xl max-w-3xl lowercase" : "text-4xl md:text-6xl font-bold"; 
            const titleWeight = align === "bottom-left" ? "font-normal italic" : "font-bold"; 
            return (
                <div className={`relative ${height} w-full bg-cover bg-center rounded-xl overflow-hidden shadow-xl mb-12 group`} style={{ backgroundImage: `url(${image})` }}>
                    <div className="absolute inset-0 bg-pizarra/60 group-hover:bg-pizarra/50 transition duration-500"></div>
                    <div className={`relative z-10 h-full flex flex-col ${alignClasses} p-4`}>
                        <h1 className={`font-cinzel ${titleSize} ${titleWeight} text-pergamino tracking-wider text-shadow mb-2 leading-tight`}>{title}</h1>
                        {subtitle && <p className="font-cinzel text-dorado text-xl tracking-widest uppercase">{subtitle}</p>}
                    </div>
                </div>
            );
        };

        const SectionTitle = ({ children, subtitle }) => (
            <div className="text-center mb-10">
                <h2 className="font-cinzel text-3xl md:text-4xl font-bold text-pizarra inline-block border-b-4 border-dorado pb-2 px-4">{children}</h2>
                {subtitle && <p className="font-merriweather italic text-pompeyano mt-4 text-lg">{subtitle}</p>}
            </div>
        );

        const renderTextContent = (content) => {
            if(!content) return null;
            if (Array.isArray(content)) return content.map((line, i) => <p key={i} className="mb-4">{line}</p>);
            return content.split('\n\n').map((paragraph, index) => {
                const blockquoteMatch = paragraph.match(/^blockquote:(.*)/s);
                if (blockquoteMatch) {
                    return <blockquote key={index} className="border-l-4 border-dorado bg-pergamino/50 p-4 md:p-6 my-6 italic text-gray-700 rounded-r-md shadow-inner">{blockquoteMatch[1].trim()}</blockquote>;
                }
                return <p key={index} className="mb-4">{paragraph}</p>;
            });
        };

        // --- P√°ginas ---

        const PageArticle = ({ articleId, setPage }) => {
            const article = DATA.tabularium.articles.find(a => a.id === articleId);

            if (!article) return <div className="text-center py-20">Art√≠culo no encontrado</div>;

            return (
                <div className="fade-in max-w-4xl mx-auto">
                    <button onClick={() => setPage('tabularium')} className="flex items-center text-pompeyano font-cinzel font-bold mb-8 hover:text-dorado transition"><Icons.ArrowLeft size={20} className="mr-2" /> Volver al Tabularium</button>
                    <div className="bg-white p-6 md:p-12 rounded-xl shadow-2xl border-roman-gold">
                        <div className="text-center mb-8 pb-4 border-b-2 border-pompeyano">
                            <span className="text-sm font-cinzel text-dorado uppercase tracking-widest bg-pergamino px-3 py-1 rounded-full border border-dorado">{article.category}</span>
                            <h1 className="font-cinzel text-3xl md:text-5xl font-bold text-pizarra mt-4 mb-2">{article.title}</h1>
                            <p className="text-gray-500 italic text-sm">Publicado el {article.date} por {article.author}</p>
                        </div>
                        <img src={article.img} alt={article.title} className="w-full h-auto rounded-lg shadow-lg mb-8" />
                        {article.intro && <section className="mb-10 p-4 border-l-4 border-pompeyano bg-pergamino/70 rounded-r-md"><p className="text-xl italic text-gray-800 leading-relaxed font-cinzel">{article.intro}</p></section>}
                        
                        {article.sections && <div className="article-content">{article.sections.map((section, index) => (
                            <section key={index} className="mb-10">
                                <h2>{section.title}</h2>
                                {renderTextContent(section.content)}
                                {section.image && <img src={section.image} alt={section.title} className="w-full h-auto rounded-lg shadow-md border border-gray-200 mt-4" />}
                            </section>
                        ))}</div>}
                        
                        {article.bibliografia && <section className="mt-12 pt-8 border-t border-gray-200"><h2 className="font-cinzel text-2xl font-bold text-pompeyano border-none mb-4 flex items-center"><Icons.BookOpen size={24} className="mr-2" /> BIBLIOGRAF√çA</h2><ul className="text-sm text-gray-600 space-y-2 list-none pl-0">{article.bibliografia.map((ref, index) => (<li key={index} className="before:content-['‚Ä¢'] before:mr-2 before:text-dorado">{ref}</li>))}</ul ></section>}
                    </div>
                </div>
            );
        };

        const PageHome = ({ setPage }) => (
            <div className="fade-in">
                <PageHero image={DATA.general.heroImageHome} title={DATA.home.heroTitle} subtitle="" align="bottom-left" />
                <section className="max-w-4xl mx-auto text-center mb-16 px-4"><h2 className="font-cinzel text-3xl font-bold text-pompeyano mb-6">M√°s all√° del estudio</h2><p className="text-lg md:text-xl text-pizarra leading-relaxed text-justify">{DATA.home.intro}</p></section>
                <section className="mb-16">
                    <SectionTitle subtitle="Nuestros pilares">NOSTRA FUNDAMENTA</SectionTitle>
                    <div className="grid md:grid-cols-3 gap-8">{DATA.home.pilares.map((pilar, index) => (<div key={index} className="bg-white p-8 rounded-lg shadow-lg border-t-4 border-dorado hover:-translate-y-2 transition duration-300"><h3 className="font-cinzel text-2xl font-bold text-pompeyano mb-4">{pilar.title}</h3><p className="text-gray-700 mb-6 text-justify">{pilar.text}</p><button onClick={() => setPage(pilar.linkTo)} className="text-dorado font-bold hover:text-pompeyano transition flex items-center text-sm uppercase tracking-widest">Saber m√°s &rarr;</button></div>))}</div>
                </section>
            </div>
        );

        const PageNostri = () => (
            <div className="fade-in">
                <SectionHeader title="NOSTRI" subtitle="Nuestra Historia" />
                <section className="max-w-4xl mx-auto mb-16"><div className="bg-white p-8 md:p-12 rounded-lg shadow-xl"><h3 className="font-cinzel text-2xl font-bold text-pizarra mb-1">Initia et Progressus</h3><p className="font-cinzel text-pompeyano italic mb-6">origen y trayectoria</p><p className="text-lg text-justify leading-relaxed mb-6 text-gray-700">{DATA.nostri.mainText}</p><div className="bg-pergamino p-4 border-l-4 border-pompeyano italic text-pompeyano">"En Ibidem, cada costura, cada receta, cada herramienta es un argumento hist√≥rico."</div></div></section>
                <section className="max-w-4xl mx-auto text-center"><SectionTitle>MEMORIA AETERNA</SectionTitle><div className="bg-white p-8 rounded-xl shadow-xl relative overflow-hidden"><div className="absolute top-0 left-0 w-full h-2 bg-dorado"></div><div className="flex flex-col md:flex-row items-center md:items-start gap-8"><img src={DATA.nostri.founder.image} alt="Fundador" className="w-32 h-32 rounded-full border-4 border-dorado object-cover shadow-md" /><div className="text-left"><h4 className="font-cinzel text-2xl font-bold text-pizarra">{DATA.nostri.founder.name}</h4><p className="text-dorado font-cinzel mb-3">{DATA.nostri.founder.years}</p><p className="text-gray-600 italic text-justify">{DATA.nostri.founder.desc}</p></div></div></div></section>
            </div>
        );

        const PageTabularium = ({ setPage, setSelectedArticleId }) => {
            const [filter, setFilter] = useState('Omnes');
            const articles = DATA.tabularium.articles;
            const categories = ['Omnes', ...new Set(articles.map(a => a.category))];
            const filtered = filter === 'Omnes' ? articles : articles.filter(a => a.category === filter);
            
            const handleReadArticle = (id) => {
                setSelectedArticleId(id);
                setPage('article');
            };

            return (
                <div className="fade-in">
                    <SectionHeader title="TABULARIUM" subtitle="Archivo Acad√©mico" />
                    <div className="flex flex-wrap justify-center gap-4 mb-12">{categories.map(cat => (<button key={cat} onClick={() => setFilter(cat)} className={`px-6 py-2 rounded-full font-cinzel text-sm transition-all duration-300 ${filter === cat ? 'bg-pompeyano text-white shadow-lg scale-105' : 'bg-white text-pizarra border border-gray-300 hover:border-dorado hover:text-dorado'}`}>{cat}</button>))}</div>
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">{filtered.map(article => (<article key={article.id} className="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition duration-300 group flex flex-col"><div className="overflow-hidden h-48"><img src={article.img} alt={article.title} className="w-full h-full object-cover group-hover:scale-110 transition duration-700" /></div><div className="p-6 flex-grow flex flex-col"><div className="text-xs font-cinzel text-dorado uppercase tracking-widest mb-2">{article.category} | {article.date}</div><h3 className="font-cinzel text-xl font-bold text-pompeyano mb-3 group-hover:text-pizarra transition">{article.title}</h3><p className="text-gray-600 text-sm mb-4 flex-grow text-justify">{article.summary}</p><button onClick={() => handleReadArticle(article.id)} className="mt-auto text-pompeyano font-bold hover:underline text-sm self-start flex items-center"><Icons.BookOpen size={16} className="mr-2" /> Leer Art√≠culo &rarr;</button></div></article>))}</div>
                </div>
            );
        };

        const PageFasti = ({ setPage, setInitialAlbumId }) => (
            <div className="fade-in">
                <SectionHeader title="FASTI" subtitle="Calendario y Eventos" />
                <SectionTitle subtitle="Pr√≥ximas Actividades">PROXIMA EVENTA</SectionTitle>
                <div className="max-w-5xl mx-auto space-y-6 mb-16">
                    {DATA.fasti.upcoming.length > 0 ? (
                        DATA.fasti.upcoming.map((event, idx) => (
                            <div key={idx} className={`bg-white rounded-xl shadow-md overflow-hidden md:flex border-l-8 border-dorado`}>
                                <div className={`md:w-32 bg-dorado text-pizarra p-6 flex flex-col justify-center items-center text-center shrink-0`}>
                                    <span className="font-cinzel text-4xl font-bold">{event.day}</span>
                                    <span className="font-cinzel text-sm uppercase tracking-wider">{event.month}</span>
                                </div>
                                <div className="p-6 flex-grow">
                                    <h3 className="font-cinzel text-xl md:text-2xl font-bold text-pizarra mb-2">{event.title}</h3>
                                    <div className="flex items-center text-pompeyano font-cinzel text-sm mb-3">
                                        <Icons.MapPin size={16} className="mr-2" />
                                        {event.location.locality} - {event.location.place}
                                    </div>
                                    <div className="flex gap-2 mb-4">
                                        {event.tags && event.tags.map((tag, tIdx) => (
                                            <span key={tIdx} className="text-xs bg-pergamino text-pizarra px-2 py-1 rounded border border-dorado/50">{tag}</span>
                                        ))}
                                    </div>
                                    <p className="text-gray-600">{event.desc}</p>
                                </div>
                            </div>
                        ))
                    ) : (
                        <div className="bg-white/60 p-12 rounded-xl shadow-inner border-2 border-gray-200 text-center border-double border-4 border-pompeyano/20">
                             <h3 className="font-cinzel text-2xl font-bold text-pompeyano mb-2 italic">"Silentium est in Fastis"</h3>
                             <p className="text-gray-600 italic font-merriweather">Actualmente no hay eventos programados en el calendario.</p>
                        </div>
                    )}
                </div>
                <div className="mt-16">
                    <SectionTitle subtitle="Nuestros Viajes en el Tiempo">ACTA PRAETERITA</SectionTitle>
                    <div className="max-w-4xl mx-auto relative border-l-4 border-pompeyano/30 ml-6 md:ml-12 space-y-12 pb-12">
                        {DATA.fasti.past.map((event, idx) => (
                            <div key={idx} className="relative pl-8 md:pl-12">
                                <div className="absolute -left-[10px] top-2 w-4 h-4 rounded-full bg-dorado border-2 border-pompeyano z-10"></div>
                                <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition duration-300 border border-gray-100 relative group">
                                    <div className="md:flex justify-between items-start">
                                        <div>
                                            <h3 className="font-cinzel text-xl font-bold text-pompeyano">{event.title}</h3>
                                            <div className="flex flex-col text-sm font-cinzel text-dorado mb-3 mt-1">
                                                <span className="font-bold">{event.date}</span>
                                                <span className="flex items-center text-pizarra mt-1">
                                                    <Icons.MapPin size={14} className="mr-1 text-pompeyano"/> 
                                                    {event.location.locality}
                                                </span>
                                                <span className="text-gray-500 text-xs italic block ml-5">({event.location.place})</span>
                                            </div>
                                            <div className="flex gap-2 mb-4">{event.tags && event.tags.map((tag, tIdx) => (<span key={tIdx} className="text-xs bg-pergamino text-pizarra px-2 py-1 rounded border border-dorado/50">{tag}</span>))}</div>
                                            <p className="text-gray-600 mb-4 text-justify leading-relaxed">{event.desc}</p>
                                        </div>
                                    </div>
                                    {/* Bot√≥n que enlaza con la galer√≠a */}
                                    <button onClick={() => { setPage('imagina'); setInitialAlbumId(event.id); }} className="text-pizarra hover:text-pompeyano font-bold text-sm flex items-center transition border-t border-gray-100 pt-3 mt-2 w-full group-hover:text-dorado"><Icons.Camera size={16} className="mr-2" /> Ver Galer√≠a Fotogr√°fica &rarr;</button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        const PageImagina = ({ initialAlbumId, setInitialAlbumId, setPage }) => {
            const [lightboxOpen, setLightboxOpen] = useState(false);
            const [currentImageIndex, setCurrentImageIndex] = useState(0);
            const [selectedAlbum, setSelectedAlbum] = useState(null); 
            const [filter, setFilter] = useState('Omnes');
            
            const albums = DATA.imagina.albums;
            // Recoger todas las categor√≠as de todos los √°lbumes
            const allCategories = albums.flatMap(album => album.images.map(img => img.category));
            const uniqueCategories = ['Omnes', ...new Set(allCategories)];
            
            // Si hay un ID inicial al cargar, buscar el √°lbum
            useEffect(() => {
                if (initialAlbumId) {
                    const album = albums.find(a => a.id === initialAlbumId);
                    if (album) setSelectedAlbum(album);
                    // Limpiar el estado inicial para futuras navegaciones
                    setInitialAlbumId(null);
                }
            }, [initialAlbumId, albums, setInitialAlbumId]);

            const imagesToDisplay = selectedAlbum ? (filter === 'Omnes' ? selectedAlbum.images : selectedAlbum.images.filter(img => img.category === filter)) : [];

            const openLightbox = (index) => { setCurrentImageIndex(index); setLightboxOpen(true); };
            const nextImage = (e) => { e.stopPropagation(); setCurrentImageIndex((prev) => (prev + 1) % imagesToDisplay.length); };
            const prevImage = (e) => { e.stopPropagation(); setCurrentImageIndex((prev) => (prev - 1 + imagesToDisplay.length) % imagesToDisplay.length); };
            
            // Vista de Detalle del √Ålbum
            if (selectedAlbum) {
                const albumCategories = ['Omnes', ...new Set(selectedAlbum.images.map(img => img.category))];

                return (
                    <div className="fade-in">
                        <button onClick={() => setSelectedAlbum(null)} className="flex items-center text-pompeyano font-cinzel font-bold mb-8 hover:text-dorado transition"><Icons.ArrowLeft size={20} className="mr-2" /> Volver a √Ålbumes</button>
                        <SectionHeader title={selectedAlbum.eventTitle} subtitle={`Galer√≠a de Evento | ${selectedAlbum.date}`} />

                        <div className="flex flex-wrap justify-center gap-4 mb-12">
                            {albumCategories.map(cat => (
                                <button key={cat} onClick={() => setFilter(cat)} className={`px-6 py-2 rounded-full font-cinzel text-sm transition-all duration-300 ${filter === cat ? 'bg-pompeyano text-white shadow-lg scale-105' : 'bg-white text-pizarra border border-gray-300 hover:border-dorado hover:text-dorado'}`}>{cat}</button>
                            ))}
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
                            {imagesToDisplay.map((img, idx) => (
                                <div key={idx} className="relative aspect-square group overflow-hidden rounded-lg shadow-lg cursor-pointer border-2 border-transparent hover:border-dorado transition-all" onClick={() => openLightbox(idx)}>
                                    <img src={img.src} alt={img.caption} className="w-full h-full object-cover transform group-hover:scale-110 transition duration-700" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex flex-col justify-end p-4"><span className="text-dorado text-xs font-bold uppercase tracking-wider mb-1">{img.category}</span><p className="text-pergamino font-cinzel text-sm truncate">{img.caption}</p></div>
                                </div>
                            ))}
                        </div>
                        {imagesToDisplay.length === 0 && (<p className="text-center text-gray-500 italic mt-12">No hay im√°genes en esta categor√≠a.</p>)}
                        
                        {lightboxOpen && imagesToDisplay.length > 0 && (
                            <div className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 fade-in" onClick={() => setLightboxOpen(false)}>
                                <button className="absolute top-4 right-4 text-white hover:text-dorado"><Icons.X size={32} /></button>
                                <button className="absolute left-2 md:left-8 text-white hover:text-dorado" onClick={prevImage}><Icons.ChevronLeft size={48} /></button>
                                <div className="max-w-5xl max-h-[90vh] flex flex-col items-center" onClick={(e) => e.stopPropagation()}><img src={imagesToDisplay[currentImageIndex].src} alt="Visor" className="max-w-full max-h-[80vh] object-contain border-4 border-pizarra shadow-2xl" /><div className="mt-4 text-center"><span className="block text-dorado text-xs uppercase tracking-widest mb-1">{imagesToDisplay[currentImageIndex].category}</span><p className="text-pergamino font-cinzel text-xl tracking-wider">{imagesToDisplay[currentImageIndex].caption}</p></div></div>
                                <button className="absolute right-2 md:right-8 text-white hover:text-dorado" onClick={nextImage}><Icons.ChevronRight size={48} /></button>
                            </div>
                        )}
                    </div>
                );
            }
            
            // Vista de Lista de √Ålbumes (Default)
            return (
                <div className="fade-in">
                    <SectionHeader title="IMAGINA" subtitle="Galer√≠a Multimedia | √Ålbumes" />
                    <SectionTitle subtitle="Reportajes Fotogr√°ficos de nuestros eventos pasados">ACTA PICTA</SectionTitle>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {albums.map((album, idx) => (
                            <div key={idx} onClick={() => { setSelectedAlbum(album); setFilter('Omnes'); }} className="bg-white rounded-xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transition duration-300 cursor-pointer overflow-hidden group">
                                <div className="relative h-48 overflow-hidden">
                                    <img src={album.coverImage} alt={`Portada de ${album.eventTitle}`} className="w-full h-full object-cover transform group-hover:scale-110 transition duration-700" />
                                    <div className="absolute inset-0 bg-pizarra/30 group-hover:bg-pizarra/10 transition duration-300 flex items-center justify-center">
                                        <Icons.Gallery size={48} className="text-pergamino opacity-80 group-hover:opacity-100 transition duration-300" />
                                    </div>
                                </div>
                                <div className="p-4 text-center">
                                    <h3 className="font-cinzel text-xl font-bold text-pompeyano truncate group-hover:text-pizarra transition">{album.eventTitle}</h3>
                                    <p className="text-xs text-dorado uppercase tracking-widest mt-1">{album.date}</p>
                                    <p className="text-gray-500 text-sm mt-2">{album.images.length} Fotos</p>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {albums.length === 0 && (<p className="text-center text-gray-500 italic mt-12">A√∫n no se han publicado √°lbumes de eventos.</p>)}
                </div>
            );
        };


        const App = () => {
            const [page, setPage] = useState('home');
            const [selectedArticleId, setSelectedArticleId] = useState(null);
            const [initialAlbumId, setInitialAlbumId] = useState(null); // Nuevo estado para abrir un √°lbum al navegar desde Fasti
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            
            useEffect(() => { window.scrollTo(0, 0); setMobileMenuOpen(false); }, [page]);
            
            const NavLink = ({ target, label, isMobile = false }) => {
                const isActive = page === target || 
                                 (target === 'tabularium' && page === 'article') || 
                                 (target === 'fasti' && page === 'eventDetail') || 
                                 (target === 'imagina' && initialAlbumId !== null);
                const baseClass = "cursor-pointer transition duration-300 font-cinzel font-semibold";
                const desktopClass = isActive ? "text-pompeyano border-b-2 border-pompeyano pb-1" : "text-pizarra hover:text-pompeyano pb-1";
                const mobileClass = `block px-4 py-3 text-white ${isActive ? 'bg-black/20' : 'hover:bg-white/10'}`;
                
                const handleClick = () => {
                    if (target === 'imagina') setInitialAlbumId(null);
                    setPage(target);
                };
                
                return (<a onClick={handleClick} className={`${baseClass} ${isMobile ? mobileClass : desktopClass}`}>{label}</a>);
            };
            
            const renderPage = () => {
                switch (page) {
                    case 'home': return <PageHome setPage={setPage} />;
                    case 'nostri': return <PageNostri />;
                    case 'fasti': return <PageFasti setPage={setPage} setInitialAlbumId={setInitialAlbumId} />; 
                    case 'imagina': return <PageImagina initialAlbumId={initialAlbumId} setInitialAlbumId={setInitialAlbumId} setPage={setPage} />;
                    case 'tabularium': return <PageTabularium setPage={setPage} setSelectedArticleId={setSelectedArticleId} />;
                    case 'article': return <PageArticle articleId={selectedArticleId} setPage={setPage} />; 
                    case 'eventDetail': return <div className="text-center py-20">Este evento ya ha pasado. Ve a Acta Praeterita.</div>; // El detalle de evento ya no es necesario para futuros, pero lo mantenemos por si acaso.
                    default: return <PageHome setPage={setPage} />;
                }
            };
            return (
                <div className="flex flex-col min-h-screen">
                    <header className="sticky top-0 z-50 bg-pergamino shadow-lg border-b border-dorado/30">
                        <div className="container mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center space-x-2 cursor-pointer" onClick={() => setPage('home')}><img src={DATA.general.logoUrl} alt="Ibidem Logo" className="h-12 w-auto" onError={(e) => {e.target.onerror = null; e.target.src='https://placehold.co/120x48/F5EFE3/9A2A2A?text=IBIDEM'}} /></div>
                            <nav className="hidden md:flex space-x-8"><NavLink target="home" label="DOMUS" /><NavLink target="nostri" label="NOSTRI" /><NavLink target="fasti" label="FASTI" /><NavLink target="imagina" label="IMAGINA" /><NavLink target="tabularium" label="TABULARIUM" /></nav>
                            <button className="md:hidden text-pompeyano" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}><Icons.Menu size={28} /></button>
                        </div>
                        {mobileMenuOpen && (<div className="md:hidden bg-pompeyano fade-in"><NavLink target="home" label="DOMUS" isMobile={true} /><NavLink target="nostri" label="NOSTRI" isMobile={true} /><NavLink target="fasti" label="FASTI" isMobile={true} /><NavLink target="imagina" label="IMAGINA" isMobile={true} /><NavLink target="tabularium" label="TABULARIUM" isMobile={true} /></div>)}
                    </header>
                    <main className="flex-grow container mx-auto px-4 py-8 md:py-12">{renderPage()}</main>
                    <footer className="flex-shrink-0 bg-pizarra text-pergamino py-12 border-t-4 border-dorado">
                        <div className="container mx-auto px-4 text-center"><h3 className="font-cinzel text-3xl font-bold text-dorado mb-6">CONTACTUS</h3><div className="flex flex-col items-center space-y-4 mb-8"><a href={`mailto:${DATA.general.email}`} className="flex items-center font-merriweather hover:text-dorado transition"><Icons.Mail size={18} className="mr-2" /> {DATA.general.email}</a></div><div className="flex justify-center space-x-8 mb-8"><a href={DATA.general.facebook} target="_blank" className="hover:text-dorado hover:scale-110 transition duration-300"><Icons.Facebook size={28} /></a><a href={DATA.general.instagram} target="_blank" className="hover:text-dorado hover:scale-110 transition duration-300"><Icons.Instagram size={28} /></a></div><p className="font-merriweather text-xs opacity-50">&copy; 2025 Ibidem. Recreaci√≥n Hist√≥rica.</p></div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>