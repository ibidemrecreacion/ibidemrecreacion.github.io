<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ibidem: Recreaci√≥n Hist√≥rica | Vivere Romanum</title>
    
    <!-- LIBRER√çAS EXTERNAS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">

    <!-- ESTILOS PERSONALIZADOS -->
    <style>
        :root {
            --color-sigillata: #963b2f;
            --color-pergamino: #F5EFE3;
            --color-pizarra: #2A2A2A; /* Color oscuro para cabeceras */
            --color-dorado: #B8860B;
        }
        body {
            font-family: 'Merriweather', serif;
            background-color: var(--color-pergamino);
            color: var(--color-pizarra);
            /* Textura sutil de papel */
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
        }
        .font-cinzel { font-family: 'Cinzel', serif; }
        
        /* Clases utilitarias romanas */
        .border-roman {
            border: 3px double var(--color-sigillata);
        }
        .border-roman-gold {
            border: 3px double var(--color-dorado);
        }
        .text-shadow {
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8); /* Sombra m√°s fuerte para legibilidad sobre imagen */
        }
        
        /* Estilo espec√≠fico para el contenido de art√≠culo */
        .article-content h2, .event-content h2 {
            font-family: 'Cinzel', serif;
            color: var(--color-sigillata);
            font-weight: 700;
            font-size: 1.75rem; /* 28px */
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--color-dorado);
            padding-bottom: 0.5rem;
        }
        .article-content p, .event-content p {
            margin-bottom: 1.5rem;
            line-height: 1.8;
            text-align: justify;
        }
        .article-content blockquote {
            border-left: 4px solid var(--color-dorado);
            background-color: #fcfaf6;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #555;
        }
        .article-content ul, .event-content ul {
            list-style: disc;
            margin-left: 1.5rem;
            margin-bottom: 1.5rem;
            padding-left: 0.5rem;
        }
        
        /* Estilo espec√≠fico para el cartel de evento */
        .event-poster {
            background-color: #ffffff;
            border: 5px solid var(--color-sigillata);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* Animaciones suaves */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    
    <!-- CONFIGURACI√ìN TAILWIND -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sigillata: '#963b2f',
                        pergamino: '#F5EFE3',
                        pizarra: '#2A2A2A',
                        dorado: '#B8860B',
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- L√ìGICA DE LA APLICACI√ìN (REACT) -->
    <script type="text/babel">

        // =====================================================================
        // üèõÔ∏è BASE DE DATOS DE CONTENIDO (EDITA ESTO PARA CAMBIAR TEXTOS) üèõÔ∏è
        // =====================================================================
        
        const { useState, useEffect } = React;

        const articleContent = {
            id: 1,
            category: "Indumentaria",
            title: "La Toga Pura: Mitos y Realidades del Tejido C√≠vico",
            date: "Agosto, 2024",
            author: "Dr. L. Cornelius Piso",
            img: "https://placehold.co/1000x400/9A2A2A/F5EFE3?text=TOGA+PURA", 
            intro: "La toga, el distintivo por excelencia del ciudadano romano, ha sido objeto de innumerables interpretaciones err√≥neas, tanto en el arte como en la recreaci√≥n. Este estudio busca desmitificar su tama√±o, peso y la t√©cnica de su drapeado, bas√°ndose en la evidencia arqueol√≥gica y las fuentes literarias.",
            sections: [
                {
                    title: "El Tama√±o: ¬øMito de la Manta Gigante?",
                    content: "Durante mucho tiempo, se populariz√≥ la idea de que la toga era una pieza de tela de dimensiones astron√≥micas (hasta 6 metros o m√°s). Si bien era grande, las representaciones escult√≥ricas de la √©poca imperial sugieren un tama√±o m√°s manejable para el uso diario. Nuestra reconstrucci√≥n se basa en un patr√≥n el√≠ptico de 4.5 metros, lo que permite el *sinus* y el *umbo* sin paralizar al portador. Los patrones de drapeado var√≠an significativamente seg√∫n la √©poca, siendo la *toga praetexta* arcaica mucho m√°s sencilla que la imperial.",
                    image: "https://placehold.co/600x350/B8860B/2A2A2A?text=UMBO+Y+SINUS"
                },
                {
                    title: "El Material y Color",
                    content: "La *toga pura* o *virilis* era, por definici√≥n, blanca o cruda, sin tintes caros. Estaba hecha de lana de oveja de buena calidad, pero no necesariamente de la lana m√°s fina. La clave resid√≠a en el bataneado y el blanqueo (a menudo con azufre) para lograr un color inmaculado. Una de las fuentes clave es Plinio el Viejo, quien describe las diferentes calidades de lana utilizadas en Roma. La sensaci√≥n al tacto era m√°s cercana al fieltro pesado que a un tejido moderno ligero. Esto influ√≠a directamente en la forma en que el tejido ca√≠a y manten√≠a su forma. \n\nblockquote:¬´El color de la toga debe ser el blanco m√°s brillante que la lana pueda conseguir. Si un hombre no puede blanquear su toga, ¬øc√≥mo podr√° blanquear su alma ante los dioses?¬ª - Marco Aurelio, en una carta ap√≥crifa.",
                    image: null
                },
                {
                    title: "El Drapeado C√≠vico: El Arte de Vestir",
                    content: "El acto de vestirse con la toga no era trivial; era un ritual que a menudo requer√≠a la ayuda de un esclavo especializado (*vestitor*). El drapeado no solo era est√©tico sino funcional: un ciudadano honorable llevaba el *sinus* (la gran bolsa de tela sobre la cintura) y el *umbo* (un nudo de tela en el pecho). El *umbo* serv√≠a incluso como una rudimentaria cartera. \n\nLos j√≥venes al alcanzar la mayor√≠a de edad (alrededor de los 14-16 a√±os) cambiaban la *toga praetexta* (con borde p√∫rpura) por la *toga virilis*, un rito de paso crucial en la vida p√∫blica romana. El estudio detallado de los relieves en el Ara Pacis proporciona la mejor gu√≠a visual sobre c√≥mo se lograba este drapeado en la √©lite.",
                    image: "https://placehold.co/600x350/2A2A2A/F5EFE3?text=ARA+PACIS+RELIEVE"
                }
            ],
            bibliografia: [
                "Bieber, M. (1977). *Ancient Dress*. Cambridge University Press.",
                "Flower, H. (2004). *The Cambridge Companion to the Age of Constantine*. Cambridge University Press.",
                "Sekunda, N. (1998). *The Roman Army 200 BC‚Äì106 AD*. Osprey Publishing."
            ]
        };

        const eventDetail = {
            id: 1,
            title: "Ludi Romani: Feria de Recreaci√≥n Hist√≥rica",
            location: "Tarraco (Tarragona)",
            date: "12 - 14 de Octubre, 2025",
            time: "10:00h a 19:00h (continuo)",
            img: "https://placehold.co/1000x400/9A2A2A/F5EFE3?text=LUDI+ROMANI+TARRACO",
            subtitle: "Vida civil en la Provincia Tarraconense",
            generalDesc: "Participaci√≥n en uno de los festivales de recreaci√≥n m√°s grandes de la pen√≠nsula. Nos centraremos en la instalaci√≥n de una *taberna* y una *domus* para mostrar el culto dom√©stico y la gastronom√≠a.",
            sections: [
                {
                    title: "Agenda (Fasti)",
                    content: [
                        { time: "S√°bado 12", activity: "10:00h - Apertura del campamento y talleres. 17:00h - Charla: *El culto a los Lares*." },
                        { time: "Domingo 13", activity: "11:00h - Taller de pan romano. 15:00h - Representaci√≥n: *Una boda plebeya*." },
                        { time: "Lunes 14", activity: "12:00h - Demostraci√≥n de indumentaria (*Draping*). 19:00h - Clausura." }
                    ]
                },
                {
                    title: "Requerimientos de Participaci√≥n",
                    content: [
                        "Indumentaria completa y rigurosa del S. I - II d.C. (toga, t√∫nica o stola).",
                        "Los alimentos y bebidas a exponer deben seguir recetas de Apicius o fuentes contempor√°neas.",
                        "Es obligatorio el uso de un recipiente para el agua y cuencos cer√°micos (*terra sigillata* o r√©plicas adecuadas)."
                    ]
                },
                {
                    title: "Detalles Log√≠sticos y Contacto",
                    content: "El alojamiento est√° provisto en tiendas de recreaci√≥n (pabellones) dentro del recinto ferial. Se proporcionar√° un pase de acceso especial para los recreadores. La confirmaci√≥n de asistencia es obligatoria antes del 1 de Septiembre, enviando un correo con el nombre completo y la actividad a desarrollar. \n\nContacto para participantes: IbidemLogistica@gmail.com"
                }
            ]
        };
        
        const DATA = {
            general: {
                email: "ibidemrecreacion@gmail.com",
                facebook: "https://www.facebook.com/ibidem.ibidem/",
                instagram: "https://www.instagram.com/ibidemrecreacion/",
                logoUrl: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Ibidem_logo_nuevo.png",
                heroImageHome: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Pepe_Larario.jpg"
            },
            home: {
                // Nota: Estos campos se usan ahora como configuraci√≥n base, pero el texto del Hero se pasa directamente en el componente
                title: "Ibidem",
                subtitle: "Vivere Romanum",
                intro: "Somos una asociaci√≥n dedicada a la reconstrucci√≥n minuciosa de la vida civil romana, centrando nuestro esfuerzo en el detalle de la indumentaria, los oficios y la gastronom√≠a del Imperio. Nuestro enfoque es simple: hacer vivir la historia bas√°ndonos siempre en fuentes primarias.",
                pilares: [
                    { 
                        title: "Rigor Hist√≥rico", 
                        text: "Nos basamos en fuentes primarias, tanto escritas como arqueol√≥gicas e iconogr√°ficas, y metodolog√≠a cient√≠fica para cada recreaci√≥n.", 
                        linkTo: "tabularium" 
                    },
                    { 
                        title: "Vida Civil", 
                        text: "Recreamos los momentos m√°s importantes de la vida civil: bodas, funerales, cultos dom√©sticos y festividades, elaborando siempre nuestros propios trajes y utiler√≠a con rigor.", 
                        linkTo: "imagina" 
                    },
                    { 
                        title: "Divulgaci√≥n", 
                        text: "Llevamos la historia a yacimientos y museos con una experiencia did√°ctica y participativa, haciendo honor a nuestro nombre, Ibidem, \"en el mismo lugar\".", 
                        linkTo: "fasti" 
                    }
                ]
            },
            nostri: {
                text: "Ibidem es una asociaci√≥n de recreaci√≥n hist√≥rica con sede en Puente Genil (C√≥rdoba), fundada por el desaparecido Jos√© Montesinos Moreno, un pionero en la recreaci√≥n hist√≥rica. Ibidem naci√≥ de una idea sencilla: acercar el p√∫blico a la intrahistoria, es decir, la cotidianeidad de los personas an√≥nimas, traer a la vida sus costumbres, ritos, esperanzas y miedos. Desde su fundaci√≥n en 2013, nuestra asociaci√≥n ha tenido una obsesi√≥n, aplicar a la recreaci√≥n hist√≥rica civil el rigor acad√©mico. Durante todo este tiempo hemos trabajado en la investigaci√≥n, reconstrucci√≥n y difusi√≥n de distintos aspectos de la vida cotidiana como la indumentaria, ritos dom√©sticos, el papel de la mujer, los funerales o el uso del agua, entre otras. Aunque el periodo hist√≥rico en el que m√°s hemos trabajado sea la Antig√ºedad tard√≠a romana,  nuestra investigaci√≥n y trabajo se extiende por otras √©pocas como la Roma republicana, el mundo bizantino, el calcol√≠tico o el mundo andalus√≠. Ibidem es una de las asociaciones de recreaci√≥n hist√≥rica m√°s veteranas de Andaluc√≠a, ha estado presente en actividades culturales de diversos museo y yacimientos arqueol√≥gicos andaluces como Sevilla, C√≥rdoba, Carmona, It√°lica, Antequera, El Egido o Gilena, cuya musealizaci√≥n fue obra de Jos√© Montesinos. Sus actividades se han representado en festivales de recreaci√≥n hist√≥rica nacionales e internacionales como Natale di Roma, Calendas en Cordvba, Em√©rita l√∫dica, Tarraco Viva o Castra Legionis. Ibidem fue adem√°s la responsable de las escenas de dramatizaci√≥n del documental ¬´Al-√Åndalus: el legado¬ª, producido por el Canal de Historia.",
                founder: {
                    name: "Jos√© Montesinos Moreno",
                    years: "1969‚Äì2022",
                    desc: "Ibidem naci√≥ de la mente y la experiencia de Pepe Montesinos, fundador y coordinador de nuestro grupo. Pepe era tremendamente inteligente, curioso, inquieto, inconformista, pol√©mico, infatigable y tan generoso que all√° por donde pas√≥ dej√≥ un poco (m√°s bien mucho) de su esencia. Y todo ello lo hac√≠a con tanto sentido del humor que era imposible no dejarse llevar por esa tormenta creativa que era Pepe. Era un pol√≠mata con el que poder debatir sobre lo m√°s profundo de la naturaleza humana o satirizar hasta el absurdo cualquier tema. Sus manos dominaron la pintura, el modelado, la costura, la artesan√≠a y su mente era capaz de reconciliar campos del conocimiento aparentemente inconexos para llegar a conclusiones tan divergentes como curiosas. Para la gente de Ibidem no s√≥lo fue un coordinador: fue un amigo, un l√≠der, un maestro al que poder acudir en cualquier momento. Por eso su ausencia se hace tan dura. Se te echa tanto de menos, Pepe...",
                    image: "https://raw.githubusercontent.com/ibidemrecreacion/ibidem/refs/heads/main/Screenshot_20251005_111843_Instagram.jpg"
                }
            },
            rostra: {
                news: [
                    { 
                        id: 1, 
                        title: "Hallazgo de la Taberna 'El Grano': La vida social romana a debate", 
                        summary: "Excavaciones en Pompeya revelan una taberna con frescos intactos, abriendo el debate sobre el ocio y la dieta popular en el siglo I d.C.", 
                        date: "20 Nov 2025", 
                        tag: "Arqueolog√≠a",
                        image: "https://placehold.co/400x250/5D4037/F5EFE3?text=TABERNA"
                    },
                    { 
                        id: 2, 
                        title: "La Toga: Un nuevo patr√≥n de sastre revoluciona el drapeado en la recreaci√≥n", 
                        summary: "Un estudio textil propone un m√©todo simplificado para lograr el drapeado cl√°sico, mejorando el rigor en los eventos.", 
                        date: "15 Nov 2025", 
                        tag: "Recreaci√≥n",
                        image: "https://placehold.co/400x250/9A2A2A/F5EFE3?text=TOGA_NEWS"
                    },
                    { 
                        id: 3, 
                        title: "La C√°tedra de Historia de Roma aprueba la recreaci√≥n como herramienta did√°ctica", 
                        summary: "Reconocimiento oficial del valor educativo de las asociaciones para complementar la ense√±anza universitaria.", 
                        date: "01 Nov 2025", 
                        tag: "Actualidad",
                        image: "https://placehold.co/400x250/B8860B/2A2A2A?text=DIDACTICA"
                    },
                ]
            },
            fasti: {
                upcoming: [], // Vaciado para activar el mensaje de "Silentium"
                past: [
                    {
                        id: 101,
                        title: "VII Recreaci√≥n Romana de Numancia",
                        date: "15 - 17 de Septiembre, 2024",
                        desc: "Participaci√≥n destacada en uno de los eventos de recreaci√≥n hist√≥rica m√°s importantes de la pen√≠nsula, centrados en la vida civil y militar durante el asedio.",
                        location: "Garray (Soria)",
                        tags: ["Evento", "Vida Civil", "Militar"]
                    },
                    {
                        id: 102,
                        title: "Ludus Magnus en Tarraco Viva",
                        date: "1 - 3 de Junio, 2024",
                        desc: "Taller did√°ctico sobre los juegos romanos, con enfoque en el Tesserae y el Duodecim Scripta, atrayendo a un gran n√∫mero de visitantes.",
                        location: "Tarragona",
                        tags: ["Taller", "Juegos", "Divulgaci√≥n"]
                    },
                    {
                        id: 103,
                        title: "Muestra de Artesan√≠a en Emerita Augusta",
                        date: "12 - 14 de Abril, 2024",
                        desc: "Exposici√≥n y demostraci√≥n de t√©cnicas de alfarer√≠a y metalurgia romana, en colaboraci√≥n con el Museo Nacional de Arte Romano.",
                        location: "M√©rida",
                        tags: ["Artesan√≠a", "Utiller√≠a"]
                    }
                ]
            },
            tabularium: {
                articles: [
                    { id: 1, category: "Indumentaria", title: "La Toga Pura", date: "Ago 2024", img: "https://placehold.co/400x250/9A2A2A/F5EFE3?text=TOGA", desc: "Un estudio que desmantela los mitos sobre el tama√±o de la toga." },
                    { id: 2, category: "Gastronomia", title: "El Garum", date: "Sep 2024", img: "https://placehold.co/400x250/D4A017/333333?text=GARUM", desc: "An√°lisis de las recetas de Apicius y su reconstrucci√≥n." },
                    { id: 3, category: "Artesania", title: "El Faber (Herrero)", date: "Jul 2024", img: "https://placehold.co/400x250/333333/F5EFE3?text=FABER", desc: "Herramientas y t√©cnicas del siglo II d.C." },
                     { id: 4, category: "Vida Domestica", title: "El Lararium", date: "Oct 2024", img: "https://placehold.co/400x250/555555/F5EFE3?text=LARARIUM", desc: "El culto privado en la domus romana." }
                ]
            },
            imagina: {
                // HE A√ëADIDO ETIQUETAS (tags) A LAS IM√ÅGENES PARA EL FILTRO
                images: [
                    { src: "https://placehold.co/800x600/333333/F5EFE3?text=VINALIA", caption: "Vinalia Rustica", category: "Actividades" },
                    { src: "https://placehold.co/800x600/D4A017/333333?text=ALFARERIA", caption: "Taller de Alfarer√≠a", category: "Utiller√≠a" },
                    { src: "https://placehold.co/800x600/9A2A2A/F5EFE3?text=LEGIO", caption: "Campamento Legionario", category: "Actividades" },
                    { src: "https://placehold.co/800x600/F5EFE3/333333?text=CENA", caption: "Cena Social", category: "Actividades" },
                    { src: "https://placehold.co/800x600/552200/F5EFE3?text=MATRONA", caption: "Vestimenta Matrona", category: "Indumentaria" },
                    { src: "https://placehold.co/800x600/222222/F5EFE3?text=SACRIFICIO", caption: "Ritual P√∫blico", category: "Actividades" },
                ]
            }
        };

        // =====================================================================
        // üõ†Ô∏è COMPONENTES ESTRUCTURALES (SISTEMA DE ICONOS INTERNO) üõ†Ô∏è
        // =====================================================================

        // Sistema de Iconos SVG integrados (No falla nunca)
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Icons = {
            Menu: (props) => <IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></IconBase>,
            X: (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>,
            Mail: (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>,
            Facebook: (props) => <IconBase {...props}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></IconBase>,
            Instagram: (props) => <IconBase {...props}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></IconBase>,
            MapPin: (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>,
            ChevronLeft: (props) => <IconBase {...props}><path d="m15 18-6-6 6-6"/></IconBase>,
            ChevronRight: (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>,
            Newspaper: (props) => <IconBase {...props}><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2"/><path d="M18 6h-8"/><path d="M15 10h-5"/><path d="M15 14h-5"/><path d="M15 18h-5"/></IconBase>,
            BookOpen: (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>,
            ArrowLeft: (props) => <IconBase {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></IconBase>,
            Calendar: (props) => <IconBase {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconBase>,
            Clock: (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>,
            Camera: (props) => <IconBase {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></IconBase>
        };

        // --- Componente de Cabecera para SECCIONES INTERNAS ---
        const SectionHeader = ({ title, subtitle }) => (
            <div className="w-full bg-pizarra text-pergamino p-6 md:p-8 rounded-xl shadow-xl mb-12 text-center border-b-4 border-dorado fade-in">
                <h1 className="font-cinzel text-3xl md:text-5xl font-bold tracking-wider mb-1">
                    {title}
                </h1>
                {subtitle && <p className="font-cinzel text-dorado text-lg tracking-widest uppercase italic mt-1">{subtitle}</p>}
            </div>
        );

        // --- Componente de Hero (MODIFICADO) ---
        const PageHero = ({ image, title, subtitle, height = "h-[60vh]", align = "center" }) => {
            // Definir clases de alineaci√≥n
            const alignClasses = align === "bottom-left" 
                ? "items-start justify-end text-left pb-8 pl-8" 
                : "items-center justify-center text-center";

            const titleSize = align === "bottom-left" 
                ? "text-lg md:text-xl max-w-3xl lowercase" // Forzada min√∫scula con lowercase, tama√±o reducido
                : "text-4xl md:text-6xl font-bold"; 
            
            const titleWeight = align === "bottom-left"
                ? "font-normal italic" 
                : "font-bold"; 

            return (
                <div className={`relative ${height} w-full bg-cover bg-center rounded-xl overflow-hidden shadow-xl mb-12 group`} style={{ backgroundImage: `url(${image})` }}>
                    <div className="absolute inset-0 bg-pizarra/60 group-hover:bg-pizarra/50 transition duration-500"></div>
                    <div className={`relative z-10 h-full flex flex-col ${alignClasses} p-4`}>
                        <h1 className={`font-cinzel ${titleSize} ${titleWeight} text-pergamino tracking-wider text-shadow mb-2 leading-tight`}>{title}</h1>
                        {subtitle && <p className="font-cinzel text-dorado text-xl tracking-widest uppercase">{subtitle}</p>}
                    </div>
                </div>
            );
        };

        // --- Componente de T√≠tulo de Sub-Secci√≥n ---
        const SectionTitle = ({ children, subtitle }) => (
            <div className="text-center mb-10">
                <h2 className="font-cinzel text-3xl md:text-4xl font-bold text-pizarra inline-block border-b-4 border-dorado pb-2 px-4">
                    {children}
                </h2>
                {subtitle && <p className="font-merriweather italic text-sigillata mt-4 text-lg">{subtitle}</p>}
            </div>
        );

        // =====================================================================
        // üìú COMPONENTE: ARTICLE PAGE (Mantenido) üìú
        // =====================================================================

        const renderTextContent = (content) => {
            return content.split('\n\n').map((paragraph, index) => {
                const blockquoteMatch = paragraph.match(/^blockquote:(.*)/s);
                if (blockquoteMatch) {
                    return (
                        <blockquote key={index} className="border-l-4 border-dorado bg-pergamino/50 p-4 md:p-6 my-6 italic text-gray-700 rounded-r-md shadow-inner">
                            {blockquoteMatch[1].trim()}
                        </blockquote>
                    );
                }
                const simpleNewlines = paragraph.trim().split('\n').map((line, lineIndex) => (
                    <span key={lineIndex}>{line}{lineIndex < paragraph.trim().split('\n').length - 1 && <br />}</span>
                ));
                return <p key={index}>{simpleNewlines}</p>;
            });
        };

        const PageArticle = ({ articleId, setPage }) => {
            const article = articleContent; 

            return (
                <div className="fade-in max-w-4xl mx-auto">
                    {/* Bot√≥n de Regreso */}
                    <button 
                        onClick={() => setPage('tabularium')} 
                        className="flex items-center text-sigillata font-cinzel font-bold mb-8 hover:text-dorado transition"
                    >
                        <Icons.ArrowLeft size={20} className="mr-2" /> Volver al Tabularium
                    </button>

                    {/* Contenedor Principal del Art√≠culo */}
                    <div className="bg-white p-6 md:p-12 rounded-xl shadow-2xl border-roman-gold">
                        
                        {/* Cabecera del Art√≠culo */}
                        <div className="text-center mb-8 pb-4 border-b-2 border-sigillata">
                            <span className="text-sm font-cinzel text-dorado uppercase tracking-widest bg-pergamino px-3 py-1 rounded-full border border-dorado">
                                {article.category}
                            </span>
                            <h1 className="font-cinzel text-3xl md:text-5xl font-bold text-pizarra mt-4 mb-2">{article.title}</h1>
                            <p className="text-gray-500 italic text-sm">
                                Publicado el {article.date} por {article.author}
                            </p>
                        </div>

                        {/* Imagen de Portada */}
                        <img src={article.img} alt={`Imagen principal de ${article.title}`} className="w-full h-auto rounded-lg shadow-lg mb-8" />
                        
                        {/* Introducci√≥n */}
                        <section className="mb-10 p-4 border-l-4 border-sigillata bg-pergamino/70 rounded-r-md">
                             <p className="text-xl italic text-gray-800 leading-relaxed font-cinzel">{article.intro}</p>
                        </section>

                        {/* Contenido por Secciones */}
                        <div className="article-content">
                            {article.sections.map((section, index) => (
                                <section key={index} className="mb-10">
                                    <h2>{section.title}</h2>
                                    {renderTextContent(section.content)}
                                    {section.image && (
                                        <figure className="my-8">
                                            <img src={section.image} alt={section.title} className="w-full h-auto rounded-lg shadow-md border border-gray-200" />
                                            <figcaption className="text-center text-sm italic text-gray-500 mt-2">
                                                Figura {index + 1}: {section.title}
                                            </figcaption>
                                        </figure>
                                    )}
                                </section>
                            ))}
                        </div>
                        
                        {/* Bibliograf√≠a */}
                        <section className="mt-12 pt-8 border-t border-gray-200">
                            <h2 className="font-cinzel text-2xl font-bold text-sigillata border-none mb-4 flex items-center">
                                <Icons.BookOpen size={24} className="mr-2" /> BIBLIOGRAF√çA CITADA
                            </h2>
                            <ul className="text-sm text-gray-600 space-y-2 list-none pl-0">
                                {article.bibliografia.map((ref, index) => (
                                    <li key={index} className="before:content-['‚Ä¢'] before:mr-2 before:text-dorado">
                                        {ref}
                                    </li>
                                ))}
                            </ul>
                        </section>

                    </div>
                    <div className="mt-8 text-center">
                        <button 
                            onClick={() => setPage('tabularium')} 
                            className="text-pizarra font-cinzel font-bold hover:text-sigillata transition underline"
                        >
                            &larr; Volver a la Lista de Art√≠culos
                        </button>
                    </div>
                </div>
            );
        };


        // =====================================================================
        // üóìÔ∏è COMPONENTE: EVENT DETAIL PAGE (Mantenido) üóìÔ∏è
        // =====================================================================

        const PageEventDetail = ({ eventId, setPage }) => {
            const event = eventDetail;

            const renderGeneralContent = (content) => {
                 return content.split('\n').map((line, index) => (
                    <p key={index} className="mb-4 leading-relaxed text-gray-700">{line}</p>
                ));
            }

            return (
                <div className="fade-in max-w-4xl mx-auto">
                    {/* Bot√≥n de Regreso */}
                    <button 
                        onClick={() => setPage('fasti')} 
                        className="flex items-center text-sigillata font-cinzel font-bold mb-8 hover:text-dorado transition"
                    >
                        <Icons.ArrowLeft size={20} className="mr-2" /> Volver al Calendario (Fasti)
                    </button>

                    {/* Cartel Principal del Evento */}
                    <div className="event-poster bg-pergamino/80 p-6 md:p-10 rounded-xl shadow-2xl">
                        
                        {/* T√≠tulo y Subt√≠tulo */}
                        <div className="text-center mb-8 bg-sigillata/10 p-4 rounded-lg border-b-4 border-dorado">
                            <h1 className="font-cinzel text-3xl md:text-5xl font-extrabold text-sigillata mb-1">{event.title}</h1>
                            <p className="font-cinzel text-xl text-pizarra tracking-widest italic">{event.subtitle}</p>
                        </div>
                        
                        {/* Imagen del Evento */}
                        <img src={event.img} alt={`Imagen de ${event.title}`} className="w-full h-auto rounded-lg shadow-xl mb-8 border-4 border-pizarra" />

                        {/* Ficha de Informaci√≥n Clave */}
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 text-center font-cinzel font-semibold text-lg">
                            <div className="p-4 bg-dorado text-white rounded-lg shadow-md flex items-center justify-center">
                                <Icons.Calendar size={20} className="mr-2" /> <span>{event.date}</span>
                            </div>
                            <div className="p-4 bg-pizarra text-pergamino rounded-lg shadow-md flex items-center justify-center">
                                <Icons.Clock size={20} className="mr-2" /> <span>{event.time}</span>
                            </div>
                            <div className="p-4 bg-sigillata text-white rounded-lg shadow-md flex items-center justify-center">
                                <Icons.MapPin size={20} className="mr-2" /> <span>{event.location}</span>
                            </div>
                        </div>

                        {/* Descripci√≥n General */}
                        <section className="mb-10 p-4 border-l-4 border-pizarra bg-white rounded-r-md">
                            <h2 className="text-xl font-cinzel font-bold text-pizarra border-none mb-3">CONVOCATIO</h2>
                             {renderGeneralContent(event.generalDesc)}
                        </section>

                        {/* Contenido Detallado: Agenda y Requerimientos */}
                        <div className="event-content grid md:grid-cols-2 gap-8">
                            <section>
                                <h2>AGENDA (ORDO DIERUM)</h2>
                                <ol className="list-decimal list-inside space-y-4 text-gray-700">
                                    {event.sections.find(s => s.title === 'Agenda (Fasti)').content.map((item, index) => (
                                        <li key={index} className="pl-2">
                                            <strong className="text-sigillata">{item.time}:</strong> {item.activity}
                                        </li>
                                    ))}
                                </ol>
                            </section>
                            <section>
                                <h2>REQUERIMIENTOS</h2>
                                <ul className="space-y-4 text-gray-700">
                                    {event.sections.find(s => s.title === 'Requerimientos de Participaci√≥n').content.map((req, index) => (
                                        <li key={index} className="flex items-start before:content-['\2022'] before:text-dorado before:mr-2 before:font-bold">
                                            {req}
                                        </li>
                                    ))}
                                </ul>
                            </section>
                        </div>

                        {/* Log√≠stica y Contacto */}
                        <section className="mt-12 pt-8 border-t border-sigillata/30">
                            <h2>DETALLES LOG√çSTICOS Y CONTACTO</h2>
                            <div className="text-sm">
                                {renderGeneralContent(event.sections.find(s => s.title === 'Detalles Log√≠sticos y Contacto').content)}
                            </div>
                        </section>
                    </div>

                    <div className="mt-8 text-center">
                        <button 
                            onClick={() => setPage('fasti')} 
                            className="text-pizarra font-cinzel font-bold hover:text-sigillata transition underline"
                        >
                            &larr; Volver al Calendario de Eventos
                        </button>
                    </div>
                </div>
            );
        };


        // --- P√°ginas ---

        const PageHome = ({ setPage }) => (
            <div className="fade-in">
                <PageHero 
                    image={DATA.general.heroImageHome} 
                    title="Reconstrucci√≥n hist√≥rica de la vida civil con rigor acad√©mico" 
                    subtitle="" 
                    align="bottom-left"
                />
                
                <section className="max-w-4xl mx-auto text-center mb-16 px-4">
                    <h2 className="font-cinzel text-3xl font-bold text-sigillata mb-6">M√°s all√° del estudio</h2>
                    <p className="text-lg md:text-xl text-pizarra leading-relaxed text-justify">
                        {DATA.home.intro}
                    </p>
                </section>

                <section className="mb-16">
                    {/* Cambio de subt√≠tulo solicitado */}
                    <SectionTitle subtitle="Nuestros pilares">NOSTRA FUNDAMENTA</SectionTitle>
                    <div className="grid md:grid-cols-3 gap-8">
                        {DATA.home.pilares.map((pilar, index) => (
                            <div key={index} className="bg-white p-8 rounded-lg shadow-lg border-t-4 border-dorado hover:-translate-y-2 transition duration-300">
                                {/* Aumentado el tama√±o del t√≠tulo del pilar */}
                                <h3 className="font-cinzel text-2xl font-bold text-sigillata mb-4">{pilar.title}</h3>
                                {/* Texto justificado */}
                                <p className="text-gray-700 mb-6 text-justify">{pilar.text}</p>
                                <button 
                                    onClick={() => setPage(pilar.linkTo)} 
                                    className="text-dorado font-bold hover:text-sigillata transition flex items-center text-sm uppercase tracking-widest"
                                >
                                    Saber m√°s &rarr;
                                </button>
                            </div>
                        ))}
                    </div>
                </section>
            </div>
        );

        const PageNostri = () => (
            <div className="fade-in">
                <SectionHeader title="NOSTRI" subtitle="Nuestra Historia" />
                
                {/* Primer bloque: Initia et Progressus */}
                {/* Ajustado a max-w-4xl para consistencia de anchura */}
                <section className="max-w-4xl mx-auto mb-16">
                    {/* Eliminado border-roman (cenefa) */}
                    <div className="bg-white p-8 md:p-12 rounded-lg shadow-xl">
                        <h3 className="font-cinzel text-2xl font-bold text-pizarra mb-1">Initia et Progressus</h3>
                        {/* Nuevo subt√≠tulo a√±adido */}
                        <p className="font-cinzel text-sigillata italic mb-6">origen y trayectoria</p>
                        <p className="text-lg text-justify leading-relaxed mb-6 text-gray-700">
                            {DATA.nostri.text}
                        </p>
                        <div className="bg-pergamino p-4 border-l-4 border-sigillata italic text-sigillata">
                            "En Ibidem, cada costura, cada receta, cada herramienta es un argumento hist√≥rico."
                        </div>
                    </div>
                </section>

                {/* Segundo bloque: Memoria Aeterna */}
                {/* Ajustado a max-w-4xl para que tenga la MISMA anchura que el bloque anterior */}
                <section className="max-w-4xl mx-auto text-center">
                    <SectionTitle>MEMORIA AETERNA</SectionTitle>
                    {/* Eliminado border-roman-gold (cenefa) */}
                    <div className="bg-white p-8 rounded-xl shadow-xl relative overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-2 bg-dorado"></div>
                        <div className="flex flex-col md:flex-row items-center md:items-start gap-8">
                            <img src={DATA.nostri.founder.image} alt="Fundador" className="w-32 h-32 rounded-full border-4 border-dorado object-cover shadow-md" />
                            <div className="text-left">
                                <h4 className="font-cinzel text-2xl font-bold text-pizarra">{DATA.nostri.founder.name}</h4>
                                <p className="text-dorado font-cinzel mb-3">{DATA.nostri.founder.years}</p>
                                {/* Texto justificado a√±adido */}
                                <p className="text-gray-600 italic text-justify">{DATA.nostri.founder.desc}</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        );
        
        const PageRostra = () => (
            <div className="fade-in">
                <SectionHeader title="ROSTRA" subtitle="Actualidad y Noticias" />
                
                {/* Changed subtitle as requested */}
                <SectionTitle subtitle="Actualidad en arqueolog√≠a y recreaci√≥n">QUID NOVI?</SectionTitle>
                
                <div className="max-w-4xl mx-auto space-y-10">
                    {DATA.rostra.news.map((item, idx) => (
                        <div key={item.id} className="bg-white p-6 rounded-xl shadow-lg border-l-8 border-sigillata md:flex items-start gap-6 hover:shadow-2xl transition duration-300">
                            <div className="shrink-0 mb-4 md:mb-0">
                                <img 
                                    src={item.image} 
                                    alt={item.title} 
                                    className="w-full md:w-48 h-32 object-cover rounded-md border border-gray-200"
                                />
                            </div>
                            <div className="flex-grow">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-xs font-cinzel text-dorado uppercase tracking-widest bg-pergamino px-3 py-1 rounded-full border border-dorado">{item.tag}</span>
                                    <span className="text-xs text-gray-500 italic">{item.date}</span>
                                </div>
                                <h3 className="font-cinzel text-xl font-bold text-pizarra mb-3 hover:text-sigillata transition cursor-pointer">{item.title}</h3>
                                <p className="text-gray-700 text-sm leading-relaxed mb-4">{item.summary}</p>
                                <button className="text-sigillata font-bold hover:underline text-sm flex items-center">
                                    <Icons.Newspaper size={16} className="mr-2" /> Leer m√°s
                                </button>
                            </div>
                        </div>
                    ))}
                </div>
                
                {DATA.rostra.news.length === 0 && (
                    <p className="text-center text-gray-500 italic mt-12">Pronto publicaremos nuestras primeras noticias en el Rostra.</p>
                )}
            </div>
        );

        const PageTabularium = ({ setPage }) => {
            const [filter, setFilter] = useState('Omnes');
            const articles = DATA.tabularium.articles;
            const categories = ['Omnes', ...new Set(articles.map(a => a.category))];
            
            const filteredArticles = filter === 'Omnes' 
                ? articles 
                : articles.filter(a => a.category === filter);

            return (
                <div className="fade-in">
                    <SectionHeader title="TABULARIUM" subtitle="Archivo Acad√©mico" />
                    
                    <div className="flex flex-wrap justify-center gap-4 mb-12">
                        {categories.map(cat => (
                            <button 
                                key={cat}
                                onClick={() => setFilter(cat)}
                                className={`px-6 py-2 rounded-full font-cinzel text-sm transition-all duration-300 ${
                                    filter === cat 
                                    ? 'bg-sigillata text-white shadow-lg scale-105' 
                                    : 'bg-white text-pizarra border border-gray-300 hover:border-dorado hover:text-dorado'
                                }`}
                            >
                                {cat}
                            </button>
                        ))}
                    </div>

                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        {filteredArticles.map(article => (
                            <article key={article.id} className="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-2xl transition duration-300 group flex flex-col">
                                <div className="overflow-hidden h-48">
                                    <img src={article.img} alt={article.title} className="w-full h-full object-cover group-hover:scale-110 transition duration-700" />
                                </div>
                                <div className="p-6 flex-grow flex flex-col">
                                    <div className="text-xs font-cinzel text-dorado uppercase tracking-widest mb-2">{article.category} | {article.date}</div>
                                    <h3 className="font-cinzel text-xl font-bold text-sigillata mb-3 group-hover:text-pizarra transition">{article.title}</h3>
                                    <p className="text-gray-600 text-sm mb-4 flex-grow text-justify">{article.desc}</p>
                                    <button 
                                        onClick={() => setPage('article')} 
                                        className="mt-auto text-sigillata font-bold hover:underline text-sm self-start flex items-center"
                                    >
                                        <Icons.BookOpen size={16} className="mr-2" /> Leer Art√≠culo &rarr;
                                    </button>
                                </div>
                            </article>
                        ))}
                    </div>
                    {filteredArticles.length === 0 && (
                        <p className="text-center text-gray-500 italic">No hay art√≠culos en esta categor√≠a a√∫n.</p>
                    )}
                </div>
            );
        };

        const PageFasti = ({ setPage }) => (
            <div className="fade-in">
                <SectionHeader title="FASTI" subtitle="Calendario y Eventos" />
                
                {/* SECCI√ìN 1: EVENTOS FUTUROS */}
                <SectionTitle subtitle="Pr√≥ximas Actividades">PROXIMA EVENTA</SectionTitle>
                
                <div className="max-w-5xl mx-auto space-y-6 mb-16">
                    {DATA.fasti.upcoming.length > 0 ? (
                        DATA.fasti.upcoming.map((event, idx) => (
                            <div 
                                key={idx} 
                                className={`bg-white rounded-xl shadow-md overflow-hidden md:flex ${event.main ? 'border-l-8 border-sigillata' : 'border-l-4 border-dorado'} hover:shadow-xl hover:scale-[1.01] transition duration-300 cursor-pointer`}
                                onClick={() => setPage('eventDetail')}
                            >
                                <div className={`md:w-32 ${event.main ? 'bg-sigillata text-pergamino' : 'bg-gray-100 text-pizarra'} p-6 flex flex-col justify-center items-center text-center shrink-0`}>
                                    <span className="font-cinzel text-4xl font-bold">{event.day}</span>
                                    <span className="font-cinzel text-sm uppercase tracking-wider">{event.month}</span>
                                </div>
                                <div className="p-6 flex-grow">
                                    <h3 className="font-cinzel text-xl md:text-2xl font-bold text-pizarra mb-2">{event.title}</h3>
                                    <div className="flex items-center text-dorado font-cinzel text-sm mb-3">
                                        <Icons.MapPin size={16} className="mr-2" />
                                        {event.location}
                                    </div>
                                    <p className="text-gray-600">{event.desc}</p>
                                    <button className="mt-3 text-sigillata font-bold hover:underline text-sm self-start flex items-center">
                                        <Icons.Calendar size={16} className="mr-2" /> Ver Anuncio Completo &rarr;
                                    </button>
                                </div>
                            </div>
                        ))
                    ) : (
                        // MENSAJE DE VAC√çO PERSONALIZADO EN LAT√çN
                        <div className="bg-white/60 p-12 rounded-xl shadow-inner border-2 border-gray-200 text-center">
                             <h3 className="font-cinzel text-2xl font-bold text-sigillata mb-2">"Silentium est in Fastis"</h3>
                             <p className="text-gray-600 italic">Actualmente no hay eventos programados en el calendario.</p>
                        </div>
                    )}
                </div>

                {/* SECCI√ìN 2: EVENTOS PASADOS (L√≠nea de tiempo) MEJORADA */}
                <div className="mt-16">
                    <SectionTitle subtitle="Nuestros Viajes en el Tiempo">ACTA PRAETERITA</SectionTitle>
                    
                    <div className="max-w-4xl mx-auto relative border-l-4 border-sigillata/30 ml-6 md:ml-12 space-y-12 pb-12">
                        {DATA.fasti.past.map((event, idx) => (
                            <div key={idx} className="relative pl-8 md:pl-12">
                                {/* Punto de la l√≠nea de tiempo */}
                                <div className="absolute -left-[10px] top-2 w-4 h-4 rounded-full bg-dorado border-2 border-sigillata z-10"></div>
                                
                                <div className="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition duration-300 border border-gray-100 relative group">
                                    <div className="md:flex justify-between items-start">
                                        <div>
                                            <h3 className="font-cinzel text-xl font-bold text-sigillata">{event.title}</h3>
                                            <div className="flex flex-wrap items-center gap-4 text-sm font-cinzel text-dorado mb-3">
                                                <span className="font-bold">{event.date}</span>
                                                <span className="hidden md:inline">‚Ä¢</span>
                                                <span className="flex items-center"><Icons.MapPin size={14} className="mr-1"/> {event.location}</span>
                                            </div>
                                            
                                            {/* Etiquetas de Evento Pasado */}
                                            <div className="flex gap-2 mb-4">
                                                {event.tags && event.tags.map((tag, tIdx) => (
                                                    <span key={tIdx} className="text-xs bg-pergamino text-pizarra px-2 py-1 rounded border border-dorado/50">{tag}</span>
                                                ))}
                                            </div>

                                            <p className="text-gray-600 mb-4 text-justify leading-relaxed">{event.desc}</p>
                                        </div>
                                    </div>
                                    
                                    {/* Bot√≥n de Enlace a Galer√≠a Contextual */}
                                    <button 
                                        onClick={() => {
                                            // Idealmente aqu√≠ pasar√≠amos un filtro a la galer√≠a, por ahora redirige
                                            setPage('imagina');
                                        }} 
                                        className="text-pizarra hover:text-sigillata font-bold text-sm flex items-center transition border-t border-gray-100 pt-3 mt-2 w-full group-hover:text-dorado"
                                    >
                                        <Icons.Camera size={16} className="mr-2" /> Ver Reportaje Gr√°fico
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

            </div>
        );

        const PageImagina = () => {
            const [lightboxOpen, setLightboxOpen] = useState(false);
            const [currentImageIndex, setCurrentImageIndex] = useState(0);
            // ESTADO PARA EL FILTRO DE GALER√çA
            const [filter, setFilter] = useState('Omnes');

            // Categor√≠as disponibles
            const categories = ['Omnes', 'Indumentaria', 'Utiller√≠a', 'Actividades'];

            // Filtrado de im√°genes
            const filteredImages = filter === 'Omnes' 
                ? DATA.imagina.images 
                : DATA.imagina.images.filter(img => img.category === filter);

            const openLightbox = (index) => {
                // Necesitamos encontrar el √≠ndice real en el array completo si estamos filtrando
                // Pero para simplificar la navegaci√≥n en lightbox con filtros, usaremos el √≠ndice del array filtrado
                setCurrentImageIndex(index);
                setLightboxOpen(true);
            };

            const nextImage = (e) => {
                e.stopPropagation();
                setCurrentImageIndex((prev) => (prev + 1) % filteredImages.length);
            };

            const prevImage = (e) => {
                e.stopPropagation();
                setCurrentImageIndex((prev) => (prev - 1 + filteredImages.length) % filteredImages.length);
            };

            return (
                <div className="fade-in">
                    <SectionHeader title="IMAGINA" subtitle="Galer√≠a Multimedia" />
                    
                    {/* BOTONES DE FILTRO */}
                    <div className="flex flex-wrap justify-center gap-4 mb-12">
                        {categories.map(cat => (
                            <button 
                                key={cat}
                                onClick={() => setFilter(cat)}
                                className={`px-6 py-2 rounded-full font-cinzel text-sm transition-all duration-300 ${
                                    filter === cat 
                                    ? 'bg-sigillata text-white shadow-lg scale-105' 
                                    : 'bg-white text-pizarra border border-gray-300 hover:border-dorado hover:text-dorado'
                                }`}
                            >
                                {cat}
                            </button>
                        ))}
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
                        {filteredImages.map((img, idx) => (
                            <div 
                                key={idx} 
                                className="relative aspect-square group overflow-hidden rounded-lg shadow-lg cursor-pointer border-2 border-transparent hover:border-dorado transition-all"
                                onClick={() => openLightbox(idx)}
                            >
                                <img src={img.src} alt={img.caption} className="w-full h-full object-cover transform group-hover:scale-110 transition duration-700" />
                                <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex flex-col justify-end p-4">
                                    <span className="text-dorado text-xs font-bold uppercase tracking-wider mb-1">{img.category}</span>
                                    <p className="text-pergamino font-cinzel text-sm">{img.caption}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                    
                    {filteredImages.length === 0 && (
                        <p className="text-center text-gray-500 italic mt-12">No hay im√°genes en esta categor√≠a.</p>
                    )}

                    {/* LIGHTBOX (Visor de fotos) */}
                    {lightboxOpen && filteredImages.length > 0 && (
                        <div 
                            className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 fade-in"
                            onClick={() => setLightboxOpen(false)}
                        >
                            <button className="absolute top-4 right-4 text-white hover:text-dorado">
                                <Icons.X size={32} />
                            </button>
                            
                            <button className="absolute left-2 md:left-8 text-white hover:text-dorado" onClick={prevImage}>
                                <Icons.ChevronLeft size={48} />
                            </button>
                            
                            <div className="max-w-5xl max-h-[90vh] flex flex-col items-center" onClick={(e) => e.stopPropagation()}>
                                <img 
                                    src={filteredImages[currentImageIndex].src} 
                                    alt="Visor" 
                                    className="max-w-full max-h-[80vh] object-contain border-4 border-pizarra shadow-2xl"
                                />
                                <div className="mt-4 text-center">
                                    <span className="block text-dorado text-xs uppercase tracking-widest mb-1">
                                        {filteredImages[currentImageIndex].category}
                                    </span>
                                    <p className="text-pergamino font-cinzel text-xl tracking-wider">
                                        {filteredImages[currentImageIndex].caption}
                                    </p>
                                </div>
                            </div>

                            <button className="absolute right-2 md:right-8 text-white hover:text-dorado" onClick={nextImage}>
                                <Icons.ChevronRight size={48} />
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        // --- Layout Principal ---

        const App = () => {
            const [page, setPage] = useState('home');
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            // Scrollear arriba al cambiar de p√°gina
            useEffect(() => {
                window.scrollTo(0, 0);
                setMobileMenuOpen(false);
            }, [page]);

            const NavLink = ({ target, label, isMobile = false }) => {
                // Mantener activo si la p√°gina actual es la principal o su subp√°gina de detalle
                const isActive = page === target || 
                                 (target === 'tabularium' && page === 'article') ||
                                 (target === 'fasti' && page === 'eventDetail'); 
                const baseClass = "cursor-pointer transition duration-300 font-cinzel font-semibold";
                const desktopClass = isActive 
                    ? "text-sigillata border-b-2 border-sigillata pb-1" 
                    : "text-pizarra hover:text-sigillata pb-1";
                const mobileClass = `block px-4 py-3 text-white ${isActive ? 'bg-black/20' : 'hover:bg-white/10'}`;

                return (
                    <a onClick={() => setPage(target)} className={`${baseClass} ${isMobile ? mobileClass : desktopClass}`}>
                        {label}
                    </a>
                );
            };

            // Determinar qu√© componente renderizar
            const renderPage = () => {
                switch (page) {
                    case 'home':
                        return <PageHome setPage={setPage} />;
                    case 'nostri':
                        return <PageNostri />;
                    case 'fasti':
                        return <PageFasti setPage={setPage} />; 
                    case 'imagina':
                        return <PageImagina />;
                    case 'tabularium':
                        return <PageTabularium setPage={setPage} />;
                    case 'rostra':
                        return <PageRostra />;
                    case 'article':
                        return <PageArticle articleId={1} setPage={setPage} />; 
                    case 'eventDetail':
                        return <PageEventDetail eventId={1} setPage={setPage} />; 
                    default:
                        return <PageHome setPage={setPage} />;
                }
            };

            return (
                <div className="flex flex-col min-h-screen">
                    {/* Header */}
                    <header className="sticky top-0 z-50 bg-pergamino shadow-lg border-b border-dorado/30">
                        <div className="container mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center space-x-2 cursor-pointer" onClick={() => setPage('home')}>
                                <img src={DATA.general.logoUrl} alt="Ibidem Logo" className="h-12 w-auto" onError={(e) => {e.target.onerror = null; e.target.src='https://placehold.co/120x48/F5EFE3/9A2A2A?text=IBIDEM'}} />
                            </div>
                            
                            {/* Menu Desktop - REORDENADO */}
                            <nav className="hidden md:flex space-x-8">
                                <NavLink target="home" label="DOMUS" />
                                <NavLink target="nostri" label="NOSTRI" />
                                <NavLink target="fasti" label="FASTI" />
                                <NavLink target="imagina" label="IMAGINA" />
                                <NavLink target="tabularium" label="TABULARIUM" />
                                <NavLink target="rostra" label="ROSTRA" />
                            </nav>

                            {/* Bot√≥n M√≥vil */}
                            <button className="md:hidden text-sigillata" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                                <Icons.Menu size={28} />
                            </button>
                        </div>

                        {/* Menu M√≥vil - REORDENADO */}
                        {mobileMenuOpen && (
                            <div className="md:hidden bg-sigillata fade-in">
                                <NavLink target="home" label="DOMUS" isMobile={true} />
                                <NavLink target="nostri" label="NOSTRI" isMobile={true} />
                                <NavLink target="fasti" label="FASTI" isMobile={true} />
                                <NavLink target="imagina" label="IMAGINA" isMobile={true} />
                                <NavLink target="tabularium" label="TABULARIUM" isMobile={true} />
                                <NavLink target="rostra" label="ROSTRA" isMobile={true} />
                            </div>
                        )}
                    </header>

                    {/* Contenido Principal */}
                    <main className="flex-grow container mx-auto px-4 py-8 md:py-12">
                        {renderPage()}
                    </main>

                    {/* Footer */}
                    <footer className="bg-pizarra text-pergamino py-12 border-t-4 border-dorado">
                        <div className="container mx-auto px-4 text-center">
                            <h3 className="font-cinzel text-3xl font-bold text-dorado mb-6">CONTACTUS</h3>
                            <div className="flex flex-col items-center space-y-4 mb-8">
                                <a href={`mailto:${DATA.general.email}`} className="flex items-center font-merriweather hover:text-dorado transition">
                                    <Icons.Mail size={18} className="mr-2" /> {DATA.general.email}
                                </a>
                            </div>
                            <div className="flex justify-center space-x-8 mb-8">
                                <a href={DATA.general.facebook} target="_blank" className="hover:text-dorado hover:scale-110 transition duration-300">
                                    <Icons.Facebook size={28} />
                                </a>
                                <a href={DATA.general.instagram} target="_blank" className="hover:text-dorado hover:scale-110 transition duration-300">
                                    <Icons.Instagram size={28} />
                                </a>
                            </div>
                            <p className="font-merriweather text-xs opacity-50">&copy; 2025 Ibidem. Recreaci√≥n Hist√≥rica.</p>
                        </div>
                    </footer>
                </div>
            );
        };

        // Renderizado
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>

</html>
